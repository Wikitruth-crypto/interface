const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index-M8ITHyp9.js","js/react-vendor-zDXgJfFk.js","js/vendor-CVSnAKA7.js","js/ui-vendor-BK4VHMl3.js","js/utils-vendor-Ij_pKZ_U.js","js/query-vendor-CL3SHUpM.js","js/flow-vendor-anutODpq.js","assets/react-vendor-BZV40eAE.css","js/page-marketplace-C_u_9dmk.js","js/page-create-3kqNbUMp.js","js/page-boxdetail-B0b9qN-M.js","js/wallet-vendor-C5AgOKrt.js","js/web3-vendor-CWtaQkP0.js","assets/web3-vendor-CcVPgXVa.css","js/supabase-vendor-Dj5eRMym.js","assets/page-create-Cdt0E4NA.css","js/index-BCWq_aAn.js","js/index-CcXJzKgD.js","js/text_brand-DOOb14pf.js","js/index-ChtnAr1I.js","js/index-CclL1vnN.js","js/page-token-D5rfnXKu.js","js/index--Fo-RA-j.js","js/page-profile-BMQAJCXf.js","js/index-CrzsD4Vm.js"])))=>i.map(i=>d[i]);
import{j as e,a1 as t,a2 as r,r as s,q as o,a3 as n,a4 as a,a5 as i,a6 as l,a7 as c}from"./react-vendor-zDXgJfFk.js";import{_ as d}from"./wallet-vendor-C5AgOKrt.js";import{n as m,o as u,W as p,s as x,q as h,t as f,w as g,R as j,C as b,u as y,a as k}from"./web3-vendor-CWtaQkP0.js";import{R as v,A as T,C as w}from"./page-create-3kqNbUMp.js";import{b as N}from"./query-vendor-CL3SHUpM.js";import{W as S,l as _,j as B,z as E,B as C,D as I,E as O}from"./page-boxdetail-B0b9qN-M.js";import{u as A}from"./page-profile-BMQAJCXf.js";import{a as D,S as L,B as R,J as P,K as z,L as M,N as F,t as W,O as V}from"./ui-vendor-BK4VHMl3.js";import"./vendor-CVSnAKA7.js";import"./flow-vendor-anutODpq.js";import"./utils-vendor-Ij_pKZ_U.js";import"./supabase-vendor-Dj5eRMym.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const q={DEFAULT:3e5,FORCE:15e3},U=new N({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:q.DEFAULT,gcTime:q.DEFAULT,refetchOnReconnect:!0}}});new N({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:q.FORCE,gcTime:q.FORCE,refetchOnReconnect:!0}}});const H=u({sapphireConfig:{replaceProviders:!0},chains:[h],connectors:m([{groupName:"Recommended",wallets:[f,g]}],{appName:"WikiTruth",projectId:"abaaea706f833818f64597c0063d0db9"}),transports:{[h.id]:x(void 0,v.sapphireTestnet.one)}});function K({children:r}){return e.jsx(p,{config:H,children:e.jsx(t,{client:U,children:r})})}const X={blurs:{modalOverlay:"blur(8px)"},colors:{accentColor:"#8b5cf6",accentColorForeground:"white",actionButtonBorder:"rgba(255, 255, 255, 0.1)",actionButtonBorderMobile:"rgba(255, 255, 255, 0.1)",actionButtonSecondaryBackground:"rgba(255, 255, 255, 0.05)",closeButton:"rgba(255, 255, 255, 0.6)",closeButtonBackground:"rgba(255, 255, 255, 0.1)",connectButtonBackground:"#1a1a1a",connectButtonBackgroundError:"#ff4444",connectButtonInnerBackground:"linear-gradient(0deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.05))",connectButtonText:"#ffffff",connectButtonTextError:"#ffffff",connectionIndicator:"#10b981",error:"#ff4444",generalBorder:"rgba(255, 255, 255, 0.1)",generalBorderDim:"rgba(255, 255, 255, 0.05)",menuItemBackground:"rgba(255, 255, 255, 0.05)",modalBackdrop:"rgba(0, 0, 0, 0.7)",modalBackground:"#1a1a1a",modalBorder:"rgba(255, 255, 255, 0.1)",modalText:"#ffffff",modalTextDim:"rgba(255, 255, 255, 0.6)",modalTextSecondary:"rgba(255, 255, 255, 0.8)",profileAction:"rgba(255, 255, 255, 0.1)",profileActionHover:"rgba(255, 255, 255, 0.15)",profileForeground:"rgba(255, 255, 255, 0.05)",selectedOptionBorder:"#8b5cf6",standby:"rgba(255, 255, 255, 0.4)",downloadBottomCardBackground:"#1a1a1a",downloadTopCardBackground:"#2a2a2a"},radii:{actionButton:"8px",connectButton:"10px",menuButton:"10px",modal:"16px",modalMobile:"16px"},shadows:{connectButton:"0 2px 8px rgba(0, 0, 0, 0.3)",dialog:"0 8px 24px rgba(0, 0, 0, 0.5)",profileDetailsAction:"0 2px 4px rgba(0, 0, 0, 0.2)",selectedOption:"0 0 0 2px #8b5cf6",selectedWallet:"0 2px 8px rgba(0, 0, 0, 0.3)",walletLogo:"0 2px 8px rgba(0, 0, 0, 0.3)"},fonts:{body:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'}};function J({children:t}){return e.jsx(K,{children:e.jsx(j,{theme:X,children:e.jsx(S,{children:t})})})}function $(){return e.jsx(r,{to:"https://wikitruth.eth.limo",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/logo/logo-2.svg",alt:"logo",width:36,height:36}),e.jsx("div",{className:"hidden md:block items-center",children:e.jsx("h5",{className:"text-theme text-sm md:text-base lg:text-lg font-brand",children:"Wiki Truth"})})]})})}const G=({links:t,activeKey:o,onLinkClick:n})=>{const[a,i]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:"hidden md:flex gap-2 items-center",children:t.map(t=>e.jsxs(r,{to:t.href,className:"px-3 py-1 rounded-lg transition "+(o===t.name?"text-primary font-bold":"text-white/90 hover:bg-white/12"),onClick:()=>null==n?void 0:n(t.name,t.href),children:[t.icon&&e.jsx("span",{className:"mr-1",children:t.icon}),t.name]},t.name))}),e.jsxs("div",{className:"md:hidden relative",children:[e.jsx("button",{className:"p-2 rounded text-white",onClick:()=>i(e=>!e),"aria-label":"Open menus",children:e.jsx("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4 6h16M4 12h16M4 18h16"})})}),a&&e.jsx("div",{className:"absolute left-0 top-full mt-2 w-48 bg-black rounded-xl shadow-lg z-50 flex flex-col gap-2 border border-white/10",onClick:e=>e.stopPropagation(),children:t.map(t=>e.jsxs(r,{to:t.href,className:"block px-4 py-2 rounded-lg text-base text-center transition "+(o===t.name?"text-primary font-bold":"text-white/90 hover:bg-white/10"),onClick:()=>{i(!1),null==n||n(t.name,t.href)},children:[t.icon&&e.jsx("span",{className:"mr-1",children:t.icon}),t.name]},t.name))})]})]})};function Q(t){const r=s.useRef(null);return s.useEffect(()=>{const e=()=>{if(!r.current)return;const e=e=>{const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null);let s;for(;s=r.nextNode();)t.push(s);return t};e(r.current).forEach(e=>{const t=(e.textContent||"").trim();t.includes("Testnet")&&"TEST"!==t?e.textContent="TEST":t.includes("Oasis Sapphire")&&"TEST"!==t&&"MAIN"!==t&&(e.textContent="MAIN")}),e(r.current).forEach(e=>{const t=e.textContent||"",r=t.match(/0x([a-fA-F0-9]{0,4})\.\.\.([a-fA-F0-9]{4})/);if(r){const s=r[2].slice(-3),o=t.replace(r[0],`0x...${s}`);t!==o&&(e.textContent=o)}})},t=()=>{e()};t();const s=setTimeout(t,100),o=setTimeout(t,300),n=setTimeout(t,500),a=new MutationObserver(()=>{setTimeout(e,0)});return r.current&&a.observe(r.current,{childList:!0,subtree:!0,characterData:!0}),()=>{clearTimeout(s),clearTimeout(o),clearTimeout(n),a.disconnect()}},[]),e.jsx("div",{ref:r,className:"wikitruth-connect-button-wrapper",children:e.jsx(b,{...t})})}const{Text:Y}=D,Z=({className:t,size:r="sm"})=>{const n=o(),a=s.useRef(null),{isConnected:i}=y(),{login:l,logout:c,isValidateSession:d,isLoading:m,error:u}=_(),p=A(),x=!d,h=async()=>{try{await l()}catch(e){}},f=()=>{c()},g=()=>{n("/profile")},j=s.useMemo(()=>{if(!i)return[];const t=[];return x?(t.push({key:"siwe-login",label:e.jsxs(L,{direction:"vertical",size:4,style:{width:"100%",padding:"8px 0"},children:[e.jsx("p",{className:"text-warning font-bold text-xs md:text-sm",children:"Not logged in"}),e.jsx("p",{className:"text-muted-foreground text-xs md:text-sm",children:"Sign in to access your profile"})]}),disabled:!0}),t.push({key:"siwe-login-button",label:e.jsxs("div",{style:{padding:"4px 0"},children:[e.jsx(R,{type:"primary",onClick:e=>{e.stopPropagation(),h()},disabled:m,style:{width:"100%"},children:m?"Signing...":"Sign In with SIWE"}),u&&e.jsx(Y,{type:"danger",style:{fontSize:11,display:"block",marginTop:4},children:u.message})]}),disabled:!0})):(t.push({key:"siwe-status",disabled:!0}),p&&""!==p.trim()&&t.push({key:"user-id",label:e.jsx(L,{children:e.jsxs(Y,{strong:!0,children:["User ID: ",e.jsx(Y,{type:"success",strong:!0,style:{fontFamily:"monospace",fontSize:14},children:p})]})}),disabled:!0}),p&&""!==p.trim()&&t.push({key:"profile",label:e.jsxs(L,{children:[e.jsx(P,{}),e.jsx(Y,{strong:!0,children:"Profile"})]}),onClick:g}),t.push({type:"divider"}),t.push({key:"siwe-logout",label:e.jsxs(L,{children:[e.jsx(z,{style:{color:"var(--color-attention)"}}),e.jsx("p",{className:"text-attention font-bold text-xs md:text-sm",children:"Logout"})]}),onClick:f})),t},[i,d,m,u,p,h,f,g]);return i?e.jsxs("div",{ref:a,className:t,style:{display:"inline-flex",alignItems:"center",gap:8,position:"relative"},children:[e.jsx(Q,{showBalance:!1,accountStatus:"address"}),j.length>0&&e.jsxs("div",{style:{position:"relative"},children:[e.jsx(M,{menu:{items:j},trigger:["click"],placement:"bottomRight",overlayStyle:{minWidth:150,border:"1px solid primary",borderRadius:10},getPopupContainer:()=>a.current||document.body,children:e.jsx(R,{type:"text",size:"sm"===r?"small":"lg"===r?"large":"middle",icon:x?e.jsx(F,{style:{fontSize:22}}):e.jsx(F,{style:{fontSize:22,color:"var(--color-primary)"}})})}),i&&x&&e.jsx("div",{style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:"4px",zIndex:1e3,width:"max-content",maxWidth:"160px"},children:e.jsx("div",{style:{margin:"-15px"},children:e.jsx(T,{type:"warning",message:"Unlogged",showIcon:!1,enablePulse:!0,style:{padding:"5px 8px",fontSize:"12px",lineHeight:"1.5",margin:0}})})})]})]}):e.jsx("div",{className:t,children:e.jsx(Q,{})})},ee=[{name:"Marketplace",href:"/"},{name:"Create",href:"/create"},{name:"Staking",href:"/staking"},{name:"DAO",href:"/dao"},{name:"Token",href:"/token"}];function te(){const[t,r]=s.useState(""),o=n(),a=s.useMemo(()=>ee,[]);return s.useEffect(()=>{const e=a.find(e=>"/"===e.href&&"/"===o.pathname||"/"!==e.href&&o.pathname===e.href);r(e?e.name:"")},[o.pathname,a]),e.jsx("header",{className:"w-full bg-black/70 backdrop-blur sticky top-0 z-50",children:e.jsxs(w,{className:"py-3 flex items-center justify-between",children:[e.jsx($,{}),e.jsxs("nav",{className:"flex gap-2 lg:gap-6 items-center",children:[e.jsx(G,{links:a,onLinkClick:r,activeKey:t}),e.jsx(Z,{size:"sm"})]})]})})}const re=()=>e.jsxs("div",{className:"loader-container",children:[e.jsx("div",{className:"loader-dot"}),e.jsx("div",{className:"loader-dot"}),e.jsx("div",{className:"loader-dot"}),e.jsx("div",{className:"loader-dot"})]}),se=9e5,oe=async()=>{try{await E();const e=(()=>{const e=I().filter(e=>e.isHealthy);return 0===e.length?null:[...e].sort((e,t)=>e.responseTime-t.responseTime)[0].url})();e&&C(e)}catch(e){}};let ne=null;const ae=()=>{ne&&(clearInterval(ne),ne=null)},ie=s.lazy(()=>d(()=>import("./index-M8ITHyp9.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))),le=s.lazy(()=>d(()=>import("./index-BCWq_aAn.js"),__vite__mapDeps([16,1,2,3,4,5,6,7,9,10,11,12,13,14,15]))),ce=s.lazy(()=>d(()=>import("./index-CcXJzKgD.js"),__vite__mapDeps([17,1,2,3,4,5,6,7,10,11,12,13,14,18]))),de=s.lazy(()=>d(()=>import("./index-ChtnAr1I.js"),__vite__mapDeps([19,1,2,3,4,5,6,7,10,11,12,13,14,18]))),me=s.lazy(()=>d(()=>import("./index-CclL1vnN.js"),__vite__mapDeps([20,1,2,3,4,5,6,7,21,10,11,12,13,14,9,15]))),ue=s.lazy(()=>d(()=>import("./index--Fo-RA-j.js"),__vite__mapDeps([22,1,2,3,4,5,6,7,23,10,11,12,13,14,9,15]))),pe=s.lazy(()=>d(()=>import("./index-CrzsD4Vm.js"),__vite__mapDeps([24,1,2,3,4,5,6,7,10,11,12,13,14,9,15])));function xe(){return(()=>{const{address:e,isConnected:t,connector:r}=y(),o=k(),{currentAccount:n,setCurrentAccount:a,initAccount:i,endSession:l,startSession:c}=B();s.useEffect(()=>{t&&e?n!==e.toLowerCase()&&(n&&l(),i(e.toLowerCase()),c(o)):n&&(l(),a(null))},[e,t,o,n,r,i,c,l,a])})(),O(),ne&&ae(),oe(),ne=setInterval(()=>{oe()},se),e.jsx(s.Suspense,{fallback:e.jsx(re,{}),children:e.jsxs(a,{children:[e.jsx(i,{index:!0,element:e.jsx(ie,{})}),e.jsx(i,{path:"create",element:e.jsx(le,{})}),e.jsx(i,{path:"staking",element:e.jsx(ce,{})}),e.jsx(i,{path:"dao",element:e.jsx(de,{})}),e.jsx(i,{path:"token",element:e.jsx(me,{})}),e.jsx(i,{path:"profile",element:e.jsx(ue,{})}),e.jsx(i,{path:"boxDetail/:tokenId",element:e.jsx(pe,{})})]})})}function he(){return e.jsxs(J,{children:[e.jsx(te,{}),e.jsx(xe,{})]})}const fe={name:"purple",displayName:"Purple Theme",token:{colorPrimary:"#c6a9fc",colorInfo:"#c6a9fc",colorPrimaryHover:"#bb9ee1",colorSuccess:"#c0fc29",colorError:"#f53a3d",colorLink:"#17bc93",wireframe:!1,borderRadius:8},algorithm:[W.compactAlgorithm]},ge={name:"default",displayName:"Default Theme",token:{colorPrimary:"#1677ff",colorInfo:"#1677ff",colorSuccess:"#52c41a",colorError:"#ff4d4f",colorLink:"#1677ff",wireframe:!1,borderRadius:6},algorithm:[]},je=[ge,fe],be=s.createContext(void 0),ye=({children:t,currentThemeName:r,isDarkMode:o})=>{const[n,a]=s.useState(()=>r||localStorage.getItem("selectedTheme")||"purple"),[i,l]=s.useState(()=>void 0!==o?o:"true"===localStorage.getItem("isDarkMode")),c=(d=n,je.find(e=>e.name===d)||ge);var d;const m={...c,algorithm:i?[...c.algorithm||[],W.darkAlgorithm]:c.algorithm||[]},u={currentTheme:c,setTheme:e=>{a(e),localStorage.setItem("selectedTheme",e)},availableThemes:je,isDarkMode:i,toggleDarkMode:()=>{const e=!i;l(e),localStorage.setItem("isDarkMode",e.toString())}};return e.jsx(be.Provider,{value:u,children:e.jsx(V,{theme:m,children:t})})};l.createRoot(document.getElementById("root")).render(e.jsx(s.StrictMode,{children:e.jsx(ye,{currentThemeName:"purple",isDarkMode:!0,children:e.jsx(c,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsx(he,{})})})}));
