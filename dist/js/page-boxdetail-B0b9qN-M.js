import{r as e,j as t,u as n,c as a,R as i,a as r,b as s,d as o,i as u,B as l,C as p,H as d,A as c,e as y,F as m,f,g as b}from"./react-vendor-zDXgJfFk.js";import{s as g}from"./wallet-vendor-C5AgOKrt.js";import{T as x,S as h,B as T,C as v,a as w,R as I,b as S,M as C,A,c as E,d as k,e as M,s as N,D as R}from"./ui-vendor-BK4VHMl3.js";import{c as _,e as j,f as B,g as D}from"./vendor-CVSnAKA7.js";import{c as P}from"./supabase-vendor-Dj5eRMym.js";import{u as O,a as F,b as L,c as W,d as K,z as H,Z as U,f as q,e as z,i as V,g as $,h as Z,p as G,m as X}from"./web3-vendor-CWtaQkP0.js";import{a as Y,P as J}from"./flow-vendor-anutODpq.js";const Q=e.createContext(void 0),ee=()=>{const t=e.useContext(Q);if(!t)throw new Error("useWalletContext must be used within a WalletProvider");return t},te=({children:e})=>{const{address:n,isConnected:a}=O(),i=F(),{data:r}=L(),s=W();return t.jsx(Q.Provider,{value:{address:n,isConnected:a,chainId:i,publicClient:s,walletClient:r},children:e})};function ne(...e){return _(j(e))}var ae=(e=>(e[e.SAPPHIRE_TESTNET=23295]="SAPPHIRE_TESTNET",e[e.SAPPHIRE_MAINNET=23294]="SAPPHIRE_MAINNET",e))(ae||{}),ie=(e=>(e.OFFICIAL_TOKEN="OfficialToken",e.OFFICIAL_TOKEN_SECRET="OfficialTokenSecret",e.WROSE_SECRET="wROSE_Secret",e.ERC20_SECRET="ERC20_Secret",e.WROSE="wROSE",e.TRUTH_NFT="TruthNFT",e.EXCHANGE="Exchange",e.FUND_MANAGER="FundManager",e.TRUTH_BOX="TruthBox",e.ADDRESS_MANAGER="AddressManager",e.SIWE_AUTH="SiweAuth",e.USER_ID="UserId",e))(ie||{});const re={id:ae.SAPPHIRE_TESTNET,name:"Oasis Sapphire Testnet",network:"testnet",layer:"sapphire",nativeCurrency:{name:"Testnet ROSE",symbol:"TEST",decimals:18},rpcUrls:{default:{http:["https://testnet.sapphire.oasis.io"],webSocket:["wss://testnet.sapphire.oasis.io/ws"]},public:{http:["https://testnet.sapphire.oasis.io"],webSocket:["wss://testnet.sapphire.oasis.io/ws"]}},blockExplorers:{default:{name:"Oasis Sapphire Testnet Explorer",url:"https://testnet.explorer.sapphire.oasis.io"}},testnet:!0},se={id:ae.SAPPHIRE_MAINNET,name:"Oasis Sapphire",network:"mainnet",layer:"sapphire",nativeCurrency:{name:"ROSE",symbol:"ROSE",decimals:18},rpcUrls:{default:{http:["https://sapphire.oasis.io"],webSocket:["wss://sapphire.oasis.io/ws"]},public:{http:["https://sapphire.oasis.io"],webSocket:["wss://sapphire.oasis.io/ws"]}},blockExplorers:{default:{name:"Oasis Sapphire Explorer",url:"https://explorer.sapphire.oasis.io"}},testnet:!1},oe={[ae.SAPPHIRE_TESTNET]:re,[ae.SAPPHIRE_MAINNET]:se};function ue(e){return oe[e]}const le={abi:[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"allowance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientAllowance",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC20InvalidApprover",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC20InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC20InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"}],name:"ERC20InvalidSpender",type:"error"},{inputs:[],name:"MintPeriodNotOver",type:"error"},{inputs:[],name:"NotAdmin",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount_",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to_",type:"address"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"mintAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"mintAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"mintDate",outputs:[{internalType:"uint256",name:"date",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"mintPeriod",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount_",type:"uint256"}],name:"setMintAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"period_",type:"uint256"}],name:"setMintPeriod",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}]},pe={abi:[{inputs:[{internalType:"address",name:"underlyingToken_",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"EIPError",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"allowance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientAllowance",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC20InvalidApprover",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC20InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC20InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"}],name:"ERC20InvalidSpender",type:"error"},{inputs:[],name:"ExpiredDeadline",type:"error"},{inputs:[],name:"InsufficientBalance",type:"error"},{inputs:[],name:"InvalidPermitAmount",type:"error"},{inputs:[],name:"InvalidPermitLabel",type:"error"},{inputs:[],name:"InvalidSignature",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[],name:"SignatureUsed",type:"error"},{inputs:[],name:"ZeroAmount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"EIP_PERMIT_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"enum ERC20Secret.PermitLabel",name:"label",type:"uint8"},{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{components:[{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint256",name:"v",type:"uint256"}],internalType:"struct SignatureRSV",name:"signature",type:"tuple"}],internalType:"struct ERC20Secret.EIP712Permit",name:"permit",type:"tuple"}],name:"allowanceWithPermit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"enum ERC20Secret.PermitLabel",name:"label",type:"uint8"},{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{components:[{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint256",name:"v",type:"uint256"}],internalType:"struct SignatureRSV",name:"signature",type:"tuple"}],internalType:"struct ERC20Secret.EIP712Permit",name:"permit",type:"tuple"}],name:"approveWithPermit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"enum ERC20Secret.PermitLabel",name:"label",type:"uint8"},{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{components:[{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint256",name:"v",type:"uint256"}],internalType:"struct SignatureRSV",name:"signature",type:"tuple"}],internalType:"struct ERC20Secret.EIP712Permit",name:"permit",type:"tuple"}],name:"balanceOfWithPermit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint256",name:"v",type:"uint256"}],internalType:"struct SignatureRSV",name:"signature",type:"tuple"}],name:"isSignatureUsed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"enum ERC20Secret.PermitLabel",name:"label",type:"uint8"},{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{components:[{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint256",name:"v",type:"uint256"}],internalType:"struct SignatureRSV",name:"signature",type:"tuple"}],internalType:"struct ERC20Secret.EIP712Permit",name:"permit",type:"tuple"}],name:"transferWithPermit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"underlyingToken",outputs:[{internalType:"contract IERC20Metadata",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"unwrap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"wrap",outputs:[],stateMutability:"nonpayable",type:"function"}]},de={abi:[{inputs:[{internalType:"address",name:"underlyingToken_",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"EIPError",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"allowance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientAllowance",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC20InvalidApprover",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC20InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC20InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"}],name:"ERC20InvalidSpender",type:"error"},{inputs:[],name:"ExpiredDeadline",type:"error"},{inputs:[],name:"InsufficientBalance",type:"error"},{inputs:[],name:"InvalidPermitAmount",type:"error"},{inputs:[],name:"InvalidPermitLabel",type:"error"},{inputs:[],name:"InvalidSignature",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[],name:"SignatureUsed",type:"error"},{inputs:[],name:"ZeroAmount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"EIP_PERMIT_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"enum WROSEsecret.PermitLabel",name:"label",type:"uint8"},{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{components:[{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint256",name:"v",type:"uint256"}],internalType:"struct SignatureRSV",name:"signature",type:"tuple"}],internalType:"struct WROSEsecret.EIP712Permit",name:"permit",type:"tuple"}],name:"allowanceWithPermit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"enum WROSEsecret.PermitLabel",name:"label",type:"uint8"},{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{components:[{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint256",name:"v",type:"uint256"}],internalType:"struct SignatureRSV",name:"signature",type:"tuple"}],internalType:"struct WROSEsecret.EIP712Permit",name:"permit",type:"tuple"}],name:"approveWithPermit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"enum WROSEsecret.PermitLabel",name:"label",type:"uint8"},{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{components:[{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint256",name:"v",type:"uint256"}],internalType:"struct SignatureRSV",name:"signature",type:"tuple"}],internalType:"struct WROSEsecret.EIP712Permit",name:"permit",type:"tuple"}],name:"balanceOfWithPermit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"deposit",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint256",name:"v",type:"uint256"}],internalType:"struct SignatureRSV",name:"signature",type:"tuple"}],name:"isSignatureUsed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"enum WROSEsecret.PermitLabel",name:"label",type:"uint8"},{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{components:[{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint256",name:"v",type:"uint256"}],internalType:"struct SignatureRSV",name:"signature",type:"tuple"}],internalType:"struct WROSEsecret.EIP712Permit",name:"permit",type:"tuple"}],name:"transferWithPermit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"underlyingToken",outputs:[{internalType:"contract IWROSE",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"unwrap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"wrap",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}]},ce={abi:[{inputs:[{internalType:"address",name:"addrManager_",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AmountIsZero",type:"error"},{inputs:[],name:"AuctionOver",type:"error"},{inputs:[],name:"AvailableBuyer",type:"error"},{inputs:[],name:"BlackTokenIdNotExist",type:"error"},{inputs:[],name:"BoxAlreadyInBlacklist",type:"error"},{inputs:[],name:"BoxNotExists",type:"error"},{inputs:[],name:"DeadlineIsOver",type:"error"},{inputs:[],name:"DeadlineNotIn30days",type:"error"},{inputs:[],name:"DeadlineNotOver",type:"error"},{inputs:[],name:"EmptyBoxInfoCID",type:"error"},{inputs:[],name:"EmptyKey",type:"error"},{inputs:[],name:"EmptyPrice",type:"error"},{inputs:[],name:"EmptyTokenCID",type:"error"},{inputs:[],name:"EmptyTokenURI",type:"error"},{inputs:[],name:"InBlacklist",type:"error"},{inputs:[],name:"InvalidBoxId",type:"error"},{inputs:[],name:"InvalidCaller",type:"error"},{inputs:[],name:"InvalidContractAddress",type:"error"},{inputs:[],name:"InvalidContractCaller",type:"error"},{inputs:[],name:"InvalidDeadline",type:"error"},{inputs:[],name:"InvalidERC20Interface",type:"error"},{inputs:[],name:"InvalidImplementation",type:"error"},{inputs:[],name:"InvalidPeriod",type:"error"},{inputs:[],name:"InvalidRate",type:"error"},{inputs:[],name:"InvalidSeconds",type:"error"},{inputs:[],name:"InvalidStatus",type:"error"},{inputs:[],name:"InvalidToken",type:"error"},{inputs:[],name:"NotAdmin",type:"error"},{inputs:[],name:"NotAdminOrDAO",type:"error"},{inputs:[],name:"NotBuyer",type:"error"},{inputs:[],name:"NotDAO",type:"error"},{inputs:[],name:"NotInSecrecy",type:"error"},{inputs:[],name:"NotMinter",type:"error"},{inputs:[],name:"PublicTimeNotEnd",type:"error"},{inputs:[],name:"TokenAlreadyExists",type:"error"},{inputs:[],name:"TokenNotExists",type:"error"},{inputs:[],name:"TokenNotSupported",type:"error"},{inputs:[],name:"ZeroAddress",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"boxId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"userId",type:"uint256"},{indexed:!1,internalType:"string",name:"boxInfoCID",type:"string"}],name:"BoxCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"boxId",type:"uint256"},{indexed:!1,internalType:"enum Status",name:"status",type:"uint8"}],name:"BoxStatusChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"boxId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deadline",type:"uint256"}],name:"DeadlineChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"boxId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"price",type:"uint256"}],name:"PriceChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"boxId",type:"uint256"},{indexed:!1,internalType:"bytes",name:"privateKey",type:"bytes"},{indexed:!0,internalType:"uint256",name:"userId",type:"uint256"}],name:"PrivateKeyPublished",type:"event"},{inputs:[{internalType:"uint256",name:"boxId_",type:"uint256"}],name:"addBoxToBlacklist",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"boxId_",type:"uint256"},{internalType:"uint256",name:"seconds_",type:"uint256"}],name:"addDeadline",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"admin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to_",type:"address"},{internalType:"string",name:"tokenCID_",type:"string"},{internalType:"string",name:"boxInfoCID_",type:"string"},{internalType:"bytes",name:"key_",type:"bytes"},{internalType:"uint256",name:"price_",type:"uint256"}],name:"create",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to_",type:"address"},{internalType:"string",name:"tokenCID_",type:"string"},{internalType:"string",name:"boxInfoCID_",type:"string"}],name:"createAndPublish",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"boxId_",type:"uint256"},{internalType:"uint256",name:"time_",type:"uint256"}],name:"extendDeadline",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"boxId_",type:"uint256"}],name:"getBasicData",outputs:[{internalType:"enum Status",name:"",type:"uint8"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"boxId_",type:"uint256"}],name:"getDeadline",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"boxId_",type:"uint256"}],name:"getPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"boxId_",type:"uint256"},{internalType:"bytes",name:"siweToken_",type:"bytes"}],name:"getPrivateData",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"boxId_",type:"uint256"}],name:"getStatus",outputs:[{internalType:"enum Status",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"implementation",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"incrementRate",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"boxId_",type:"uint256"}],name:"isInBlacklist",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"boxId_",type:"uint256"},{internalType:"bytes",name:"siweToken_",type:"bytes"}],name:"minterOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"boxId_",type:"uint256"}],name:"minterOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"boxId_",type:"uint256"}],name:"minterOf_debug",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextBoxId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"boxId_",type:"uint256"}],name:"payConfiFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"boxId_",type:"uint256"}],name:"publishByBuyer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"boxId_",type:"uint256"}],name:"publishByMinter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"setAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"addrManager_",type:"address"}],name:"setAddressManager",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newAdmin_",type:"address"}],name:"setAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"boxId_",type:"uint256"},{internalType:"uint256",name:"price_",type:"uint256"},{internalType:"enum Status",name:"status_",type:"uint8"},{internalType:"uint256",name:"deadline_",type:"uint256"}],name:"setBasicData",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint8",name:"rate_",type:"uint8"}],name:"setIncrementRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"boxId_",type:"uint256"},{internalType:"uint256",name:"price_",type:"uint256"}],name:"setPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"boxId_",type:"uint256"},{internalType:"enum Status",name:"status_",type:"uint8"}],name:"setStatus",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newImplementation_",type:"address"}],name:"upgrade",outputs:[],stateMutability:"nonpayable",type:"function"}]},ye={abi:[{inputs:[{internalType:"address",name:"addrManager_",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AmountIsZero",type:"error"},{inputs:[],name:"AuctionOver",type:"error"},{inputs:[],name:"AvailableBuyer",type:"error"},{inputs:[],name:"BlackTokenIdNotExist",type:"error"},{inputs:[],name:"BoxAlreadyInBlacklist",type:"error"},{inputs:[],name:"BoxNotExists",type:"error"},{inputs:[],name:"DeadlineIsOver",type:"error"},{inputs:[],name:"DeadlineNotOver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"address",name:"owner",type:"address"}],name:"ERC721IncorrectOwner",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC721InsufficientApproval",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC721InvalidApprover",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"ERC721InvalidOperator",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"ERC721InvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC721InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC721InvalidSender",type:"error"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC721NonexistentToken",type:"error"},{inputs:[],name:"EmptyBoxInfoCID",type:"error"},{inputs:[],name:"EmptyPrice",type:"error"},{inputs:[],name:"EmptyTokenCID",type:"error"},{inputs:[],name:"EmptyTokenURI",type:"error"},{inputs:[],name:"InBlacklist",type:"error"},{inputs:[],name:"InvalidBoxId",type:"error"},{inputs:[],name:"InvalidCaller",type:"error"},{inputs:[],name:"InvalidContractAddress",type:"error"},{inputs:[],name:"InvalidContractCaller",type:"error"},{inputs:[],name:"InvalidDeadline",type:"error"},{inputs:[],name:"InvalidERC20Interface",type:"error"},{inputs:[],name:"InvalidImplementation",type:"error"},{inputs:[],name:"InvalidPeriod",type:"error"},{inputs:[],name:"InvalidRate",type:"error"},{inputs:[],name:"InvalidStatus",type:"error"},{inputs:[],name:"NotAdmin",type:"error"},{inputs:[],name:"NotAdminOrDAO",type:"error"},{inputs:[],name:"NotBuyer",type:"error"},{inputs:[],name:"NotDAO",type:"error"},{inputs:[],name:"NotInSecrecy",type:"error"},{inputs:[],name:"NotMinter",type:"error"},{inputs:[],name:"PublicTimeNotEnd",type:"error"},{inputs:[],name:"TokenAlreadyExists",type:"error"},{inputs:[],name:"TokenNotExists",type:"error"},{inputs:[],name:"TokenNotSupported",type:"error"},{inputs:[],name:"ZeroAddress",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"admin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"implementation",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"isExecuteAble",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId_",type:"uint256"},{internalType:"address",name:"minter_",type:"address"},{internalType:"string",name:"tokenCID_",type:"string"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"setAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"addrManager_",type:"address"}],name:"setAddressManager",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newAdmin_",type:"address"}],name:"setAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"network_",type:"string"},{internalType:"string",name:"uri_",type:"string"}],name:"setNetwork",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newImplementation_",type:"address"}],name:"upgrade",outputs:[],stateMutability:"nonpayable",type:"function"}]},me={abi:JSON.parse('[{"inputs":[{"internalType":"address","name":"addrManager_","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"AmountIsZero","type":"error"},{"inputs":[],"name":"AuctionOver","type":"error"},{"inputs":[],"name":"AvailableBuyer","type":"error"},{"inputs":[],"name":"BlackTokenIdNotExist","type":"error"},{"inputs":[],"name":"BoxAlreadyInBlacklist","type":"error"},{"inputs":[],"name":"BoxNotExists","type":"error"},{"inputs":[],"name":"DeadlineIsOver","type":"error"},{"inputs":[],"name":"DeadlineNotOver","type":"error"},{"inputs":[],"name":"EmptyBoxInfoCID","type":"error"},{"inputs":[],"name":"EmptyPrice","type":"error"},{"inputs":[],"name":"EmptyTokenCID","type":"error"},{"inputs":[],"name":"EmptyTokenURI","type":"error"},{"inputs":[],"name":"InBlacklist","type":"error"},{"inputs":[],"name":"InvalidBoxId","type":"error"},{"inputs":[],"name":"InvalidCaller","type":"error"},{"inputs":[],"name":"InvalidContractAddress","type":"error"},{"inputs":[],"name":"InvalidContractCaller","type":"error"},{"inputs":[],"name":"InvalidDeadline","type":"error"},{"inputs":[],"name":"InvalidERC20Interface","type":"error"},{"inputs":[],"name":"InvalidImplementation","type":"error"},{"inputs":[],"name":"InvalidPeriod","type":"error"},{"inputs":[],"name":"InvalidRate","type":"error"},{"inputs":[],"name":"InvalidStatus","type":"error"},{"inputs":[],"name":"NotAdmin","type":"error"},{"inputs":[],"name":"NotAdminOrDAO","type":"error"},{"inputs":[],"name":"NotBuyer","type":"error"},{"inputs":[],"name":"NotDAO","type":"error"},{"inputs":[],"name":"NotInSecrecy","type":"error"},{"inputs":[],"name":"NotMinter","type":"error"},{"inputs":[],"name":"PublicTimeNotEnd","type":"error"},{"inputs":[],"name":"RefundPermitTrue","type":"error"},{"inputs":[],"name":"TokenAlreadyExists","type":"error"},{"inputs":[],"name":"TokenNotExists","type":"error"},{"inputs":[],"name":"TokenNotSupported","type":"error"},{"inputs":[],"name":"ZeroAddress","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"boxId","type":"uint256"},{"indexed":true,"internalType":"uint256","name":"userId","type":"uint256"}],"name":"BidPlaced","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"boxId","type":"uint256"},{"indexed":true,"internalType":"uint256","name":"userId","type":"uint256"},{"indexed":false,"internalType":"address","name":"acceptedToken","type":"address"}],"name":"BoxListed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"boxId","type":"uint256"},{"indexed":true,"internalType":"uint256","name":"userId","type":"uint256"}],"name":"BoxPurchased","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"boxId","type":"uint256"},{"indexed":true,"internalType":"uint256","name":"userId","type":"uint256"}],"name":"CompleterAssigned","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"boxId","type":"uint256"},{"indexed":false,"internalType":"bool","name":"permission","type":"bool"}],"name":"RefundPermitChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"boxId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"deadline","type":"uint256"}],"name":"RequestDeadlineChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"boxId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"deadline","type":"uint256"}],"name":"ReviewDeadlineChanged","type":"event"},{"inputs":[{"internalType":"uint256","name":"boxId_","type":"uint256"}],"name":"acceptedToken","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"admin","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"boxId_","type":"uint256"}],"name":"agreeRefund","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"boxId_","type":"uint256"},{"internalType":"address","name":"acceptedToken_","type":"address"},{"internalType":"uint256","name":"price_","type":"uint256"}],"name":"auction","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"boxId_","type":"uint256"}],"name":"bid","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"bidIncrementRate","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"boxId_","type":"uint256"}],"name":"buy","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"boxId_","type":"uint256"}],"name":"buyerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"boxId_","type":"uint256"}],"name":"buyerOf_debug","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"boxId_","type":"uint256"},{"internalType":"bytes","name":"siweToken_","type":"bytes"}],"name":"calcPayMoney","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"boxId_","type":"uint256"}],"name":"cancelRefund","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"boxId_","type":"uint256"}],"name":"completeOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"boxId_","type":"uint256"}],"name":"completerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"boxId_","type":"uint256"}],"name":"completerOf_debug","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"implementation","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"boxId_","type":"uint256"}],"name":"isInRequestRefundDeadline","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"boxId_","type":"uint256"}],"name":"isInReviewDeadline","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"boxId_","type":"uint256"}],"name":"refundPermit","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"boxId_","type":"uint256"}],"name":"refundRequestDeadline","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"refundRequestPeriod","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"boxId_","type":"uint256"}],"name":"refundReviewDeadline","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"refundReviewPeriod","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"boxId_","type":"uint256"}],"name":"refuseRefund","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"boxId_","type":"uint256"}],"name":"requestRefund","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"boxId_","type":"uint256"},{"internalType":"address","name":"acceptedToken_","type":"address"},{"internalType":"uint256","name":"price_","type":"uint256"}],"name":"sell","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"boxId_","type":"uint256"}],"name":"sellerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"boxId_","type":"uint256"}],"name":"sellerOf_debug","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"setAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"addrManager_","type":"address"}],"name":"setAddressManager","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newAdmin_","type":"address"}],"name":"setAdmin","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint8","name":"rate_","type":"uint8"}],"name":"setBidIncrementRate","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"boxId_","type":"uint256"},{"internalType":"bool","name":"permission_","type":"bool"}],"name":"setRefundPermit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"period_","type":"uint256"}],"name":"setRefundRequestPeriod","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"period_","type":"uint256"}],"name":"setRefundReviewPeriod","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newImplementation_","type":"address"}],"name":"upgrade","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},fe={abi:[{inputs:[{internalType:"address",name:"addrManager_",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AmountIsZero",type:"error"},{inputs:[],name:"ApprovalFailed",type:"error"},{inputs:[],name:"AuctionOver",type:"error"},{inputs:[],name:"AvailableBuyer",type:"error"},{inputs:[],name:"BlackTokenIdNotExist",type:"error"},{inputs:[],name:"BoxAlreadyInBlacklist",type:"error"},{inputs:[],name:"BoxNotExists",type:"error"},{inputs:[],name:"DeadlineIsOver",type:"error"},{inputs:[],name:"DeadlineNotOver",type:"error"},{inputs:[],name:"EmptyBoxInfoCID",type:"error"},{inputs:[],name:"EmptyList",type:"error"},{inputs:[],name:"EmptyPrice",type:"error"},{inputs:[],name:"EmptyTokenCID",type:"error"},{inputs:[],name:"EmptyTokenURI",type:"error"},{inputs:[],name:"EnforcedPause",type:"error"},{inputs:[],name:"InBlacklist",type:"error"},{inputs:[],name:"InvalidBoxId",type:"error"},{inputs:[],name:"InvalidCaller",type:"error"},{inputs:[],name:"InvalidContractAddress",type:"error"},{inputs:[],name:"InvalidContractCaller",type:"error"},{inputs:[],name:"InvalidDeadline",type:"error"},{inputs:[],name:"InvalidERC20Interface",type:"error"},{inputs:[],name:"InvalidImplementation",type:"error"},{inputs:[],name:"InvalidPeriod",type:"error"},{inputs:[],name:"InvalidRate",type:"error"},{inputs:[],name:"InvalidStatus",type:"error"},{inputs:[],name:"NotAdmin",type:"error"},{inputs:[],name:"NotAdminOrDAO",type:"error"},{inputs:[],name:"NotBuyer",type:"error"},{inputs:[],name:"NotDAO",type:"error"},{inputs:[],name:"NotInSecrecy",type:"error"},{inputs:[],name:"NotMinter",type:"error"},{inputs:[],name:"PublicTimeNotEnd",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"SafeERC20FailedOperation",type:"error"},{inputs:[],name:"TokenAlreadyExists",type:"error"},{inputs:[],name:"TokenNotExists",type:"error"},{inputs:[],name:"TokenNotSupported",type:"error"},{inputs:[],name:"WithdrawError",type:"error"},{inputs:[],name:"ZeroAddress",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"boxId",type:"uint256"},{indexed:!1,internalType:"uint8",name:"rate",type:"uint8"}],name:"BuyerRefundRateAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"boxId",type:"uint256"},{indexed:!1,internalType:"uint8",name:"rate",type:"uint8"}],name:"DaoFeeRateAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"userId",type:"uint256"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"HelperRewrdsWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"userId",type:"uint256"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"MinterRewardsWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"boxId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"userId",type:"uint256"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"OrderAmountPaid",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256[]",name:"list",type:"uint256[]"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!0,internalType:"uint256",name:"userId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"enum IFundManager.FundsType",name:"fundsType",type:"uint8"}],name:"OrderAmountWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"isPaused",type:"bool"}],name:"PauseToggled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"boxId",type:"uint256"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"enum IFundManager.RewardType",name:"rewardType",type:"uint8"}],name:"RewardsAdded",type:"event"},{inputs:[],name:"admin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"boxId_",type:"uint256"}],name:"allocationRewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"extraFeeRate",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token_",type:"address"},{internalType:"bytes",name:"siweToken_",type:"bytes"}],name:"helperRewardAmounts",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"helperRewardRate",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"implementation",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token_",type:"address"},{internalType:"bytes",name:"siweToken_",type:"bytes"}],name:"minterRewardAmounts",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"boxId_",type:"uint256"},{internalType:"address",name:"user_",type:"address"}],name:"orderAmounts",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"boxId_",type:"uint256"},{internalType:"bytes",name:"siweToken_",type:"bytes"}],name:"orderAmounts",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"boxId_",type:"uint256"},{internalType:"address",name:"sender_",type:"address"},{internalType:"uint256",name:"amount_",type:"uint256"}],name:"payConfidentialityFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"boxId_",type:"uint256"},{internalType:"address",name:"buyer_",type:"address"},{internalType:"uint256",name:"amount_",type:"uint256"}],name:"payOrderAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"serviceFeeRate",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"setAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"addrManager_",type:"address"}],name:"setAddressManager",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newAdmin_",type:"address"}],name:"setAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint8",name:"Rate_",type:"uint8"}],name:"setExtraFeeRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint8",name:"Rate_",type:"uint8"}],name:"setHelperRewardRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint8",name:"Rate_",type:"uint8"}],name:"setServiceFeeRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint8",name:"slippageProtection_",type:"uint8"}],name:"setSlippageProtection",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"slippageProtection",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"togglePause",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token_",type:"address"}],name:"totalRewardAmounts",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newImplementation_",type:"address"}],name:"upgrade",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token_",type:"address"}],name:"withdrawHelperRewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token_",type:"address"}],name:"withdrawMinterRewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token_",type:"address"},{internalType:"uint256[]",name:"list_",type:"uint256[]"}],name:"withdrawOrderAmounts",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token_",type:"address"},{internalType:"uint256[]",name:"list_",type:"uint256[]"}],name:"withdrawRefundAmounts",outputs:[],stateMutability:"nonpayable",type:"function"}]},be={abi:[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AmountIsZero",type:"error"},{inputs:[],name:"AuctionOver",type:"error"},{inputs:[],name:"AvailableBuyer",type:"error"},{inputs:[],name:"BlackTokenIdNotExist",type:"error"},{inputs:[],name:"BoxAlreadyInBlacklist",type:"error"},{inputs:[],name:"BoxNotExists",type:"error"},{inputs:[],name:"CannotRemoveOfficialToken",type:"error"},{inputs:[],name:"DeadlineIsOver",type:"error"},{inputs:[],name:"DeadlineNotOver",type:"error"},{inputs:[],name:"EmptyBoxInfoCID",type:"error"},{inputs:[],name:"EmptyPrice",type:"error"},{inputs:[],name:"EmptyTokenCID",type:"error"},{inputs:[],name:"EmptyTokenURI",type:"error"},{inputs:[],name:"InBlacklist",type:"error"},{inputs:[],name:"InvalidAddress",type:"error"},{inputs:[],name:"InvalidBoxId",type:"error"},{inputs:[],name:"InvalidCaller",type:"error"},{inputs:[],name:"InvalidContractAddress",type:"error"},{inputs:[],name:"InvalidContractCaller",type:"error"},{inputs:[],name:"InvalidDeadline",type:"error"},{inputs:[],name:"InvalidERC20Interface",type:"error"},{inputs:[],name:"InvalidImplementation",type:"error"},{inputs:[],name:"InvalidIndex",type:"error"},{inputs:[],name:"InvalidPeriod",type:"error"},{inputs:[],name:"InvalidRate",type:"error"},{inputs:[],name:"InvalidStatus",type:"error"},{inputs:[],name:"NotAdmin",type:"error"},{inputs:[],name:"NotAdminOrDAO",type:"error"},{inputs:[],name:"NotBuyer",type:"error"},{inputs:[],name:"NotDAO",type:"error"},{inputs:[],name:"NotInSecrecy",type:"error"},{inputs:[],name:"NotMinter",type:"error"},{inputs:[],name:"PublicTimeNotEnd",type:"error"},{inputs:[],name:"RemoveError",type:"error"},{inputs:[],name:"TokenAlreadyExists",type:"error"},{inputs:[],name:"TokenIsActive",type:"error"},{inputs:[],name:"TokenIsNotActive",type:"error"},{inputs:[],name:"TokenNotExists",type:"error"},{inputs:[],name:"TokenNotSupported",type:"error"},{inputs:[],name:"ZeroAddress",type:"error"},{inputs:[{internalType:"address",name:"reservedAddress_",type:"address"}],name:"addReservedAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token_",type:"address"}],name:"addToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"admin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"dao",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"daoFundManager",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"exchange",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"fundManager",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index_",type:"uint256"}],name:"getAddressFromIndex",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index_",type:"uint256"}],name:"getTokenByIndex",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTokenList",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"governance",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"implementation",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token_",type:"address"}],name:"isOfficialToken",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_",type:"address"}],name:"isProjectContract",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token_",type:"address"}],name:"isTokenSupported",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"officialToken",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"quoter",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token_",type:"address"}],name:"removeToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"reservedList",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"list_",type:"address[]"}],name:"setAddressList",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newAdmin_",type:"address"}],name:"setAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"setAllAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token_",type:"address"}],name:"setOfficialToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"siweAuth",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"swapContract",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"truthBox",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"truthNFT",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newImplementation_",type:"address"}],name:"upgrade",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"userId",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}]},ge={abi:[{inputs:[{internalType:"string",name:"primaryDomain",type:"string"},{internalType:"string[]",name:"domains",type:"string[]"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"A13e_RevokedAuthToken",type:"error"},{inputs:[],name:"AmountIsZero",type:"error"},{inputs:[],name:"AuctionOver",type:"error"},{inputs:[],name:"AvailableBuyer",type:"error"},{inputs:[],name:"BlackTokenIdNotExist",type:"error"},{inputs:[],name:"BoxAlreadyInBlacklist",type:"error"},{inputs:[],name:"BoxNotExists",type:"error"},{inputs:[],name:"DeadlineIsOver",type:"error"},{inputs:[],name:"DeadlineNotOver",type:"error"},{inputs:[],name:"DomainAlreadyExists",type:"error"},{inputs:[],name:"DomainNotFound",type:"error"},{inputs:[],name:"EmptyBoxInfoCID",type:"error"},{inputs:[],name:"EmptyDomain",type:"error"},{inputs:[],name:"EmptyPrice",type:"error"},{inputs:[],name:"EmptyTokenCID",type:"error"},{inputs:[],name:"EmptyTokenURI",type:"error"},{inputs:[],name:"InBlacklist",type:"error"},{inputs:[],name:"IndexOutOfBounds",type:"error"},{inputs:[],name:"InvalidAddress",type:"error"},{inputs:[],name:"InvalidBoxId",type:"error"},{inputs:[],name:"InvalidCaller",type:"error"},{inputs:[],name:"InvalidContractAddress",type:"error"},{inputs:[],name:"InvalidContractCaller",type:"error"},{inputs:[],name:"InvalidDeadline",type:"error"},{inputs:[],name:"InvalidDomain",type:"error"},{inputs:[],name:"InvalidERC20Interface",type:"error"},{inputs:[],name:"InvalidImplementation",type:"error"},{inputs:[],name:"InvalidPeriod",type:"error"},{inputs:[],name:"InvalidRate",type:"error"},{inputs:[],name:"InvalidStatus",type:"error"},{inputs:[],name:"NotAdmin",type:"error"},{inputs:[],name:"NotAdminOrDAO",type:"error"},{inputs:[],name:"NotBuyer",type:"error"},{inputs:[],name:"NotDAO",type:"error"},{inputs:[],name:"NotInSecrecy",type:"error"},{inputs:[],name:"NotMinter",type:"error"},{inputs:[],name:"PublicTimeNotEnd",type:"error"},{inputs:[],name:"SiweAuth_AddressMismatch",type:"error"},{inputs:[],name:"SiweAuth_ChainIdMismatch",type:"error"},{inputs:[],name:"SiweAuth_DomainMismatch",type:"error"},{inputs:[],name:"SiweAuth_Expired",type:"error"},{inputs:[],name:"SiweAuth_NotBeforeInFuture",type:"error"},{inputs:[],name:"SiweParser_InvalidAddressLength",type:"error"},{inputs:[],name:"SiweParser_InvalidNonce",type:"error"},{inputs:[],name:"TokenAlreadyExists",type:"error"},{inputs:[],name:"TokenNotExists",type:"error"},{inputs:[],name:"TokenNotSupported",type:"error"},{inputs:[],name:"ZeroAddress",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"string",name:"domain",type:"string"}],name:"DomainAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"string",name:"domain",type:"string"}],name:"DomainRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"string",name:"oldDomain",type:"string"},{indexed:!0,internalType:"string",name:"newDomain",type:"string"}],name:"PrimaryDomainSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"bytes32",name:"tokenHash",type:"bytes32"}],name:"SessionRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"string",name:"domain",type:"string"},{indexed:!1,internalType:"uint256",name:"expiry",type:"uint256"}],name:"UserLogin",type:"event"},{inputs:[{internalType:"string",name:"domainName",type:"string"}],name:"addDomain",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"admin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"allDomains",outputs:[{internalType:"string[]",name:"",type:"string[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"token",type:"bytes"}],name:"decodeAndValidateTokenPublic",outputs:[{components:[{internalType:"string",name:"domain",type:"string"},{internalType:"address",name:"userAddr",type:"address"},{internalType:"uint256",name:"validUntil",type:"uint256"},{internalType:"string",name:"statement",type:"string"},{internalType:"string[]",name:"resources",type:"string[]"}],internalType:"struct AuthToken",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"domain",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"domainByIndex",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"domainCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"token",type:"bytes"}],name:"getMsgSender",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"token",type:"bytes"}],name:"getResources",outputs:[{internalType:"string[]",name:"",type:"string[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"token",type:"bytes"}],name:"getStatement",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"domainToCheck",type:"string"}],name:"isDomainValid",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"token",type:"bytes"}],name:"isSessionValid",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"siweMsg",type:"string"},{components:[{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint256",name:"v",type:"uint256"}],internalType:"struct SignatureRSV",name:"sig",type:"tuple"}],name:"login",outputs:[{internalType:"bytes",name:"authToken_",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"token",type:"bytes32"}],name:"removeAuthToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"domainName",type:"string"}],name:"removeDomain",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newAdmin",type:"address"}],name:"setAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"newPrimaryDomain",type:"string"}],name:"setPrimaryDomain",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"token",type:"bytes"},{internalType:"string",name:"resource",type:"string"}],name:"testHasResourceAccess",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"token",type:"bytes"},{internalType:"string",name:"expectedStatement",type:"string"}],name:"testStatementVerification",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}]},xe={abi:[{inputs:[{internalType:"address",name:"addrManager_",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AmountIsZero",type:"error"},{inputs:[],name:"AuctionOver",type:"error"},{inputs:[],name:"AvailableBuyer",type:"error"},{inputs:[],name:"BlackTokenIdNotExist",type:"error"},{inputs:[],name:"Blacklisted",type:"error"},{inputs:[],name:"BoxAlreadyInBlacklist",type:"error"},{inputs:[],name:"BoxNotExists",type:"error"},{inputs:[],name:"DeadlineIsOver",type:"error"},{inputs:[],name:"DeadlineNotOver",type:"error"},{inputs:[],name:"EmptyBoxInfoCID",type:"error"},{inputs:[],name:"EmptyPrice",type:"error"},{inputs:[],name:"EmptyTokenCID",type:"error"},{inputs:[],name:"EmptyTokenURI",type:"error"},{inputs:[],name:"InBlacklist",type:"error"},{inputs:[],name:"InvalidBoxId",type:"error"},{inputs:[],name:"InvalidCaller",type:"error"},{inputs:[],name:"InvalidContractAddress",type:"error"},{inputs:[],name:"InvalidContractCaller",type:"error"},{inputs:[],name:"InvalidDeadline",type:"error"},{inputs:[],name:"InvalidERC20Interface",type:"error"},{inputs:[],name:"InvalidImplementation",type:"error"},{inputs:[],name:"InvalidPeriod",type:"error"},{inputs:[],name:"InvalidRate",type:"error"},{inputs:[],name:"InvalidStatus",type:"error"},{inputs:[],name:"NotAdmin",type:"error"},{inputs:[],name:"NotAdminOrDAO",type:"error"},{inputs:[],name:"NotBlacklisted",type:"error"},{inputs:[],name:"NotBuyer",type:"error"},{inputs:[],name:"NotDAO",type:"error"},{inputs:[],name:"NotInSecrecy",type:"error"},{inputs:[],name:"NotMinter",type:"error"},{inputs:[],name:"PublicTimeNotEnd",type:"error"},{inputs:[],name:"TokenAlreadyExists",type:"error"},{inputs:[],name:"TokenNotExists",type:"error"},{inputs:[],name:"TokenNotSupported",type:"error"},{inputs:[],name:"ZeroAddress",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"bool",name:"status",type:"bool"}],name:"Blacklist",type:"event"},{inputs:[{internalType:"address",name:"user_",type:"address"}],name:"addBlacklist",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"admin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user_",type:"address"}],name:"getUserId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"implementation",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user_",type:"address"}],name:"isBlacklisted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"token_",type:"bytes"}],name:"myUserId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user_",type:"address"}],name:"removeBlacklist",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"setAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"addrManager_",type:"address"}],name:"setAddressManager",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newAdmin_",type:"address"}],name:"setAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newImplementation_",type:"address"}],name:"upgrade",outputs:[],stateMutability:"nonpayable",type:"function"}]},he={[ie.OFFICIAL_TOKEN]:le.abi,[ie.OFFICIAL_TOKEN_SECRET]:pe.abi,[ie.WROSE_SECRET]:de.abi,[ie.ERC20_SECRET]:pe.abi,[ie.WROSE]:le.abi,[ie.TRUTH_NFT]:ye.abi,[ie.EXCHANGE]:me.abi,[ie.FUND_MANAGER]:fe.abi,[ie.TRUTH_BOX]:ce.abi,[ie.ADDRESS_MANAGER]:be.abi,[ie.SIWE_AUTH]:ge.abi,[ie.USER_ID]:xe.abi},Te="0x7609F2617c6e4A8757809dB67a7EAd55A5B33195",ve="0xFD4C4CFA8B1dF3aF3F7a07A630B2FbBa6b45b40d",we="0x28FE0c45e9730a89ABDdD4DC817b532F802Fe1E3",Ie="0x1aec0197b0Ddc0412393813F863382748Da5C01e",Se="0x4994C64ABC6A7BAE72C3b58133F8AAAB4dF1CbE7",Ce="0xB1F04fB48490F3B37D5FEe3731c140dbF2224F5e",Ae="0x6547F0a925BD522F029D0aFEC3A239aCDcE0122a",Ee="0xB759a0fbc1dA517aF257D5Cf039aB4D86dFB3b94",ke="0x4e30337908E19917f3F74adB45966114A55205c2",Me="0x990DE401CD0103a0107D27F82283db60F4844203",Ne="0x449e2CD61F0328Ae68f4A530170C892B45b4B269",Re="",_e={[ie.OFFICIAL_TOKEN]:Me,[ie.OFFICIAL_TOKEN_SECRET]:Ne,[ie.WROSE_SECRET]:ke,[ie.ERC20_SECRET]:Re,[ie.WROSE]:Ee,[ie.TRUTH_NFT]:Se,[ie.EXCHANGE]:ve,[ie.FUND_MANAGER]:we,[ie.TRUTH_BOX]:Ie,[ie.ADDRESS_MANAGER]:Te,[ie.SIWE_AUTH]:Ae,[ie.USER_ID]:Ce},je={..._e},Be={[ae.SAPPHIRE_TESTNET]:_e,[ae.SAPPHIRE_MAINNET]:je};function De(e){const t=Be[e];return[{index:0,name:"WikiTruth Coin",symbol:"WTRC",decimals:18,precision:3,address:t.OfficialToken,mappingAddress:t.OfficialTokenSecret,types:"ERC20",canAcceptToken:!1,contractName:ie.OFFICIAL_TOKEN,abi:he[ie.OFFICIAL_TOKEN]},{index:1,name:"WikiTruth Coin Secret",symbol:"WTRC.S",decimals:18,precision:3,address:t.OfficialTokenSecret,mappingAddress:t.OfficialToken,types:"Secret",canAcceptToken:!0,domainName:"Secret ERC20 Token",contractName:ie.OFFICIAL_TOKEN_SECRET,abi:he[ie.OFFICIAL_TOKEN_SECRET]},{index:2,name:"Wrapped ROSE",symbol:"wROSE",decimals:18,precision:3,address:t.wROSE,mappingAddress:t.wROSE_Secret,types:"ERC20",canAcceptToken:!1,contractName:ie.WROSE,abi:he[ie.WROSE]},{index:3,name:"WROSE Secret",symbol:"wROSE.S",decimals:18,precision:3,address:t.wROSE_Secret,mappingAddress:t.wROSE,types:"Secret",canAcceptToken:!0,domainName:"Secret ERC20 Token",contractName:ie.WROSE_SECRET,abi:he[ie.WROSE_SECRET]}]}function Pe(e){if(!e)return ze;const t=De(Ke),n=e.toLowerCase(),a=t.find(e=>{var t;return(null==(t=e.address)?void 0:t.toLowerCase())===n});return a||ze}const Oe={initialPrivacyPeriod:1296e3,saleValidityPeriod:1296e3,initialAuctionPeriod:432e3,bidExtensionPeriod:432e3,postCompletionPrivacyPeriod:432e3,refundRequestPeriod:604800,refundReviewPeriod:604800,deadlineExtensionWindow:259200,minterPrivacyExtension:1296e3,confidentialityFeeExtensionPeriod:1296e3,bidIncrementRate:110,incrementRate:200,serviceFeeRate:3,helperRewardRate:1},Fe={initialPrivacyPeriod:31536e3,saleValidityPeriod:31536e3,initialAuctionPeriod:2592e3,bidExtensionPeriod:2592e3,postCompletionPrivacyPeriod:2592e3,refundRequestPeriod:604800,refundReviewPeriod:1296e3,deadlineExtensionWindow:2592e3,minterPrivacyExtension:31536e3,confidentialityFeeExtensionPeriod:31536e3,bidIncrementRate:110,incrementRate:200,serviceFeeRate:3,helperRewardRate:1};function Le(e){return e===ae.SAPPHIRE_TESTNET?Oe:e===ae.SAPPHIRE_MAINNET?Fe:Oe}function We(){return Le(F())}let Ke=23295,He=re,Ue=[],qe=[],ze={index:0,name:"WikiTruth Coin",symbol:"WTRC",precision:3,decimals:18,address:"0x990DE401CD0103a0107D27F82283db60F4844203",mappingAddress:"0x449e2CD61F0328Ae68f4A530170C892B45b4B269",types:"ERC20",canAcceptToken:!1,contractName:ie.OFFICIAL_TOKEN,abi:he[ie.OFFICIAL_TOKEN]},Ve=Oe;function $e(){const t=F();e.useEffect(()=>{if(t){const e=ue(t);e&&(He=e),Ke=t,Ue=De(t),ze=function(e){const t=Be[e];return{index:0,name:"WikiTruth Coin",symbol:"WTRC",decimals:18,precision:3,address:t.OfficialToken,mappingAddress:t.OfficialTokenSecret,types:"ERC20",canAcceptToken:!1,contractName:ie.OFFICIAL_TOKEN,abi:he[ie.OFFICIAL_TOKEN]}}(t),Ve=Le(t),qe=function(e){return De(e).filter(e=>e.canAcceptToken)}(t)}},[t])}const Ze=new class{constructor(e=He.id){this.currentChainId=e}getAllContractAddresses(e){const t=e??this.currentChainId;return function(e){return e in oe}(t)?Be[t]:Be[He.id]}getContractConfig(e,t){const n=t??this.currentChainId;return{address:this.getAllContractAddresses(n)[e],abi:he[e],chainId:n}}getContractConfigByAddress(e){const t=this.getAllContractConfigs(),n=Object.values(t).find(t=>t.address===e);if(!n)throw new Error(`Contract config not found for address: ${e}`);return n}getAllContractConfigs(e){const t=e??this.currentChainId,n={};return Object.values(ie).forEach(e=>{n[e]=this.getContractConfig(e,t)}),n}};function Ge(e,t){return Ze.getContractConfig(e,t)}function Xe(t){return e.useMemo(()=>Ge(t,Ke),[t,Ke])}function Ye(){return e.useMemo(()=>{return e=Ke,Ze.getAllContractConfigs(e);var e},[Ke])}function Je(){return e.useMemo(()=>De(Ke),[Ke])}function Qe(){return e.useMemo(()=>{const e=ue(Ke);if(!e)throw new Error(`Chain config not found for chainId: ${Ke}`);return e},[Ke])}function et(){const t=n(),{publicClient:a,chainId:i}=ee(),r=e.useRef(a);r.current=a;return{readContract:e.useCallback(async e=>{let n=r.current||a;if(!n){const e=3e3,t=Date.now();for(;!n&&Date.now()-t<e;)await new Promise(e=>setTimeout(e,50)),n=r.current||a}if(!n)throw new Error("Public client not available. Please ensure WagmiProvider is properly configured.");const s=Ge(e.contractName,i),o=["contract",e.contractName,e.functionName,e.args,i];if(e.force??!1){const e=t.getQueryState(o);if(null==e?void 0:e.dataUpdatedAt){if(Date.now()-e.dataUpdatedAt<15e3)return e.data}t.removeQueries({queryKey:o})}else{const e=t.getQueryData(o);if(e)return e}const u=await n.readContract({address:s.address,abi:s.abi,functionName:e.functionName,args:e.args});return t.setQueryData(o,u),u},[i,t])}}function tt(){const{readContract:e}=et();return{getDomainCount:async()=>{try{const t=await e({contractName:ie.SIWE_AUTH,functionName:"getDomainCount",args:[]});return t?Number(t):0}catch(t){return 0}},getDomainByIndex:async t=>{try{const n=await e({contractName:ie.SIWE_AUTH,functionName:"getDomainByIndex",args:[t]});return n?String(n):""}catch(n){return""}},isSessionValid:async(t,n=!1)=>{try{const a=await e({contractName:ie.SIWE_AUTH,functionName:"isSessionValid",args:[t],force:n});return!!a&&Boolean(a)}catch(a){return!1}},login:async(t,n)=>{try{const a=await e({contractName:ie.SIWE_AUTH,functionName:"login",args:[t,n]});return a?String(a):""}catch(a){return""}},getMsgSender:async t=>{try{const n=await e({contractName:ie.SIWE_AUTH,functionName:"getMsgSender",args:[t]});return n?String(n):""}catch(n){return""}},getStatement:async t=>{try{const n=await e({contractName:ie.SIWE_AUTH,functionName:"getStatement",args:[t]});return n?String(n):""}catch(n){return""}},getResources:async t=>{try{const n=await e({contractName:ie.SIWE_AUTH,functionName:"getResources",args:[t]});return n&&Array.isArray(n)?n:[]}catch(n){return[]}}}}const nt="0x85d526809D03d17b0dBA17372Bae2E156958F260",at=["wikitruth.eth.limo","beta.wikitruth.eth.limo","app.wikitruth.eth.limo","localhost:3000","localhost:5173"],it={23294:{chainId:23294,version:"1",defaultStatement:"I accept the WikiTruth Terms of Service",defaultExpirationHours:1},23295:{chainId:23295,version:"1",defaultStatement:"I accept the WikiTruth Terms of Service",defaultExpirationHours:1}},rt=(t,n)=>{const{login:a}=tt(),{signMessageAsync:i}=K(),[r,s]=e.useState(!1),[o,u]=e.useState(null),l=()=>{const e=new Uint8Array(16);return crypto.getRandomValues(e),Array.from(e,e=>e.toString(16).padStart(2,"0")).join("")},p=e.useCallback(()=>it[t]||it[23294],[t]),d=e.useCallback(e=>{var n,a,i;const r=p(),s=new Date;s.setHours(s.getHours()+r.defaultExpirationHours);return new g.SiweMessage({domain:e.domain,address:e.address,statement:e.statement||r.defaultStatement,uri:e.uri||`https://${e.domain}`,version:r.version,chainId:t,nonce:e.nonce||l(),issuedAt:(null==(n=e.issuedAt)?void 0:n.toISOString())||(new Date).toISOString(),expirationTime:(null==(a=e.expirationTime)?void 0:a.toISOString())||s.toISOString(),notBefore:null==(i=e.notBefore)?void 0:i.toISOString(),resources:e.resources||[]}).toMessage()},[t,p]);return{login:e.useCallback(async e=>{u(null),s(!0);try{if("function"!=typeof a)throw new Error("SIWE login interface not initialized, please check the contract context");if(!n||n===H)throw new Error("The wallet is not connected, please connect the wallet first");const t={domain:(null==e?void 0:e.domain)||at[0],address:n,statement:null==e?void 0:e.statement,uri:null==e?void 0:e.uri,resources:null==e?void 0:e.resources,nonce:null==e?void 0:e.nonce,expirationTime:null==e?void 0:e.expirationTime,notBefore:null==e?void 0:e.notBefore,issuedAt:null==e?void 0:e.issuedAt};0;const r=d(t),s=(e=>{const t=e.slice(2);return{r:`0x${t.slice(0,64)}`,s:`0x${t.slice(64,128)}`,v:parseInt(t.slice(128,130),16)}})(await i({message:r})),o=await a(r,s);if(!o)throw new Error("Failed to get token");const u=t.expirationTime||(()=>{const e=new Date;return e.setHours(e.getHours()+p().defaultExpirationHours),e})();return{sessionInfo:{isLoggedIn:!0,token:o,expiresAt:u,address:n},token:o,message:r,signature:s,expiresAt:u}}catch(t){const e=t instanceof Error?t:new Error("Login failed");return u(e),null}finally{s(!1)}},[n,t,d,i,a,p]),isLoading:r,error:o,reset:e.useCallback(()=>{u(null),s(!1)},[])}},st=a()(B((e,t)=>({currentAccount:null,CHAIN_ID:null,accounts:{},securityMode:"strict",_checkAccess:e=>{const{currentAccount:n,securityMode:a}=t();return n||"strict"!==a?n:null},setCurrentAccount:n=>{var a;if(e({currentAccount:n}),n){const{accounts:i}=t();Ke&&(null==(a=i[Ke])?void 0:a[n])&&e({accounts:{...i,[Ke]:{...i[Ke],[n]:{...i[Ke][n],lastActiveAt:Date.now()}}}})}},initAccount:n=>{const{accounts:a}=t();if(Ke)if(a[Ke]||(a[Ke]={}),a[Ke][n])e({accounts:{...a,[Ke]:{...a[Ke],[n]:{...a[Ke][n],lastActiveAt:Date.now()}}},currentAccount:n});else{const t=(e=>({address:e,userId:"",loginHistory:[],currentSessionId:null,multiSig:null,boxInteractions:{},withdrawInteractions:[],txCache:{},createdAt:Date.now(),lastActiveAt:Date.now()}))(n);e({accounts:{...a,[Ke]:{...a[Ke],[n]:t}},currentAccount:n})}},removeAccount:n=>{const{accounts:a,currentAccount:i}=t();if(!Ke)return;const r={...a[Ke]};delete r[n],e({accounts:{...a,[Ke]:r},currentAccount:i===n?null:i})},setUserId:n=>{var a,i,r;const s=null==(i=(a=t())._checkAccess)?void 0:i.call(a,"setUserId");if(!s)return;const{accounts:o}=t();if(!Ke)return;const u=null==(r=o[Ke])?void 0:r[s];u&&e({accounts:{...o,[Ke]:{...o[Ke],[s]:{...u,userId:n}}}})},startSession:n=>{var a,i,r;const s=n??Ke;if(!s)return;const o=null==(i=(a=t())._checkAccess)?void 0:i.call(a,"startSession");if(!o)return;const{accounts:u}=t(),l=null==(r=u[s])?void 0:r[o];if(!l)return;const p=`${Date.now()}-${Math.random().toString(36).substring(2,15)}`,d={loginTime:Date.now(),logoutTime:null,CHAIN_ID:s,sessionId:p};var c;e({accounts:{...u,[Ke]:{...u[Ke],[o]:{...l,currentSessionId:p,loginHistory:(c=[...l.loginHistory,d],c.slice(-50))}}}})},endSession:()=>{var n,a,i;const r=null==(a=(n=t())._checkAccess)?void 0:a.call(n,"endSession");if(!r)return;const{accounts:s}=t();if(!Ke)return;const o=null==(i=s[Ke])?void 0:i[r];if(o&&o.currentSessionId){const t=o.loginHistory.map(e=>e.sessionId!==o.currentSessionId||e.logoutTime?e:{...e,logoutTime:Date.now()});e({accounts:{...s,[Ke]:{...s[Ke],[r]:{...o,currentSessionId:null,loginHistory:t}}}})}},getLoginHistory:(e=10)=>{var n,a,i,r;const s=null==(a=(n=t())._checkAccess)?void 0:a.call(n,"getLoginHistory");if(!s)return[];const{accounts:o}=t();if(!Ke)return[];return((null==(r=null==(i=o[Ke])?void 0:i[s])?void 0:r.loginHistory)||[]).slice(-e)},setMultiSigInfo:n=>{var a,i,r;const s=null==(i=(a=t())._checkAccess)?void 0:i.call(a,"setMultiSigInfo");if(!s)return;const{accounts:o}=t();if(!Ke)return;const u=null==(r=o[Ke])?void 0:r[s];u&&e({accounts:{...o,[Ke]:{...o[Ke],[s]:{...u,multiSig:n}}}})},getMultiSigInfo:()=>{var e,n,a,i;const r=null==(n=(e=t())._checkAccess)?void 0:n.call(e,"getMultiSigInfo");if(!r)return null;const{accounts:s}=t();return Ke&&(null==(i=null==(a=s[Ke])?void 0:a[r])?void 0:i.multiSig)||null},addBoxInteraction:(n,a,i)=>{var r,s,o;const u=null==(s=(r=t())._checkAccess)?void 0:s.call(r,"addBoxInteraction");if(!u)return;const l=Ke;if(!l)return;const{accounts:p}=t(),d=null==(o=p[l])?void 0:o[u];if(!d)return;const c={boxId:n,functionWrote:a,timestamp:Date.now(),CHAIN_ID:l,txHash:i},y=d.boxInteractions[n]||[];e({accounts:{...p,[l]:{...p[l],[u]:{...d,boxInteractions:{...d.boxInteractions,[n]:[...y,c]}}}}})},getBoxInteractions:e=>{var n,a,i,r;const s=null==(a=(n=t())._checkAccess)?void 0:a.call(n,"getBoxInteractions");if(!s)return[];const{accounts:o}=t();if(!Ke)return[];return(null==(r=null==(i=o[Ke])?void 0:i[s])?void 0:r.boxInteractions[e])||[]},hasBoxInteraction:(e,n)=>{var a,i,r,s;const o=null==(i=(a=t())._checkAccess)?void 0:i.call(a,"hasBoxInteraction");if(!o)return!1;const{accounts:u}=t();if(!Ke)return!1;return((null==(s=null==(r=u[Ke])?void 0:r[o])?void 0:s.boxInteractions[e])||[]).some(e=>e.functionWrote===n)},clearBoxInteractions:n=>{var a,i,r;const s=null==(i=(a=t())._checkAccess)?void 0:i.call(a,"clearBoxInteractions");if(!s)return;const{accounts:o}=t();if(!Ke)return;const u=null==(r=o[Ke])?void 0:r[s];if(u)if(n){const t={...u.boxInteractions};delete t[n],e({accounts:{...o,[Ke]:{...o[Ke],[s]:{...u,boxInteractions:t}}}})}else e({accounts:{...o,[Ke]:{...o[Ke],[s]:{...u,boxInteractions:{}}}}})},addWithdrawInteraction:(n,a,i)=>{var r,s,o;const u=null==(s=(r=t())._checkAccess)?void 0:s.call(r,"addWithdrawInteraction");if(!u)return;const l=Ke;if(!l)return;const{accounts:p}=t(),d=null==(o=p[l])?void 0:o[u];if(!d)return;const c={functionWrote:n,tokenAddress:a,timestamp:Date.now(),CHAIN_ID:l,txHash:i};e({accounts:{...p,[l]:{...p[l],[u]:{...d,withdrawInteractions:[...d.withdrawInteractions,c]}}}})},getWithdrawInteractions:e=>{var n,a,i,r;const s=null==(a=(n=t())._checkAccess)?void 0:a.call(n,"getWithdrawInteractions");if(!s)return[];const{accounts:o}=t();if(!Ke)return[];return((null==(r=null==(i=o[Ke])?void 0:i[s])?void 0:r.withdrawInteractions)||[]).filter(t=>t.functionWrote===e)},hasWithdrawInteraction:(e,n)=>{var a,i,r,s;const o=null==(i=(a=t())._checkAccess)?void 0:i.call(a,"hasWithdrawInteraction");if(!o)return!1;const{accounts:u}=t();if(!Ke)return!1;return((null==(s=null==(r=u[Ke])?void 0:r[o])?void 0:s.withdrawInteractions)||[]).some(t=>{const a=t.functionWrote===e,i=t.tokenAddress.toLowerCase()===n.toLowerCase();return a&&i})},clearWithdrawInteractions:n=>{var a,i,r;const s=null==(i=(a=t())._checkAccess)?void 0:i.call(a,"clearWithdrawInteractions");if(!s)return;const{accounts:o}=t();if(!Ke)return;const u=null==(r=o[Ke])?void 0:r[s];if(!u)return;const l=u.withdrawInteractions.filter(e=>e.functionWrote!==n);e({accounts:{...o,[Ke]:{...o[Ke],[s]:{...u,withdrawInteractions:l}}}})},cacheTx:(n,a)=>{var i,r,s;if(!Ke)return;const o=null==(r=(i=t())._checkAccess)?void 0:r.call(i,"cacheTx");if(!o)return;const{accounts:u}=t(),l=null==(s=u[Ke])?void 0:s[o];l&&e({accounts:{...u,[Ke]:{...u[Ke],[o]:{...l,txCache:{...l.txCache,[n]:{data:a,timestamp:Date.now(),CHAIN_ID:Ke}}}}}})},getTxCache:e=>{var n,a,i,r;const s=null==(a=(n=t())._checkAccess)?void 0:a.call(n,"getTxCache");if(!s)return null;const{accounts:o}=t();if(!Ke)return null;const u=null==(r=null==(i=o[Ke])?void 0:i[s])?void 0:r.txCache[e];return u&&Date.now()-u.timestamp<3e5?u.data:null},clearTxCache:n=>{var a,i,r;const s=n;if(!s)return;const o=null==(i=(a=t())._checkAccess)?void 0:i.call(a,"clearTxCache");if(!o)return;const u=s;if(!u)return;const{accounts:l}=t(),p=null==(r=l[u])?void 0:r[o];if(p)if(void 0!==s){const t=Object.entries(p.txCache).filter(([e,t])=>t.CHAIN_ID!==s).reduce((e,[t,n])=>({...e,[t]:n}),{});e({accounts:{...l,[u]:{...l[u],[o]:{...p,txCache:t}}}})}else e({accounts:{...l,[u]:{...l[u],[o]:{...p,txCache:{}}}}})},setSecurityMode:t=>{e({securityMode:t})},clearCurrentAccount:()=>{const{currentAccount:e}=t();e&&t().removeAccount(e)},clearAllAccounts:()=>{e({accounts:{},currentAccount:null})}}),{name:"AccountStore"})),ot=(e,t)=>{const{currentAccount:n}=st.getState(),a=e??Ke??void 0,i=t??n??void 0;return void 0!==a&&i?{chainId:a,address:i.toLowerCase()}:null},ut=()=>Object.create(null),lt=()=>Object.create(null),pt=(e,t,n,a)=>{const i={...e},r={...i[t]??{}};let s=r[n];return s=s?Array.isArray(s)||"object"!=typeof s?a():{...s}:a(),r[n]=s,i[t]=r,{rootClone:i,entry:s}},dt=(e,t,n,a)=>{const i=e[t];i&&("object"==typeof a&&null!==a&&0===Object.keys(a).length?delete i[n]:i[n]=a,0===Object.keys(i).length?delete e[t]:e[t]=i)},ct=a((e,t)=>({eip712Permits:{},siweSessions:{},truthBoxKeys:{},currentSession:{isLoggedIn:!1,token:null,expiresAt:null,address:null},setEip712Permit:(t,n,a,i,r,s)=>{const o=ot(r,s);if(!o||!a)return;const u=n.toLowerCase(),l=a.toLowerCase();e(e=>{const{rootClone:n,entry:a}=pt(e.eip712Permits,o.chainId,o.address,ut),r={...a[l]??{}},s={...r[t]??{}};return i?s[u]=i:delete s[u],Object.keys(s).length>0?r[t]=s:delete r[t],Object.keys(r).length>0?a[l]=r:delete a[l],dt(n,o.chainId,o.address,a),{eip712Permits:n}})},getEip712Permit:(e,n,a,i,r)=>{const s=ot(i,r);if(!s||!a)return null;const o=a.toLowerCase(),u=n.toLowerCase(),l=t().eip712Permits[s.chainId],p=null==l?void 0:l[s.address],d=null==p?void 0:p[o],c=null==d?void 0:d[e];return(null==c?void 0:c[u])??null},getAccountPermits:(e,n)=>{var a;const i=ot(e,n);if(i)return null==(a=t().eip712Permits[i.chainId])?void 0:a[i.address]},clearEip712Permits:(t,n)=>{const a=ot(t,n);a&&e(e=>{const t={...e.eip712Permits},n=e.eip712Permits[a.chainId];if(!n)return e;const i={...n};return delete i[a.address],0===Object.keys(i).length?delete t[a.chainId]:t[a.chainId]=i,{eip712Permits:t}})},setSiweSession:(t,n,a)=>{const i=ot(n,a);if(!i)return;const r={...t,address:t.address??a??null};e(e=>{const t={...e.siweSessions},n={...t[i.chainId]??{}};n[i.address]=r,t[i.chainId]=n;const{currentAccount:a}=st.getState();return{siweSessions:t,currentSession:a&&null!=Ke&&Ke===i.chainId&&a.toLowerCase()===i.address?r:e.currentSession}})},getSiweSession:(e,n)=>{var a;const i=ot(e,n);return i?(null==(a=t().siweSessions[i.chainId])?void 0:a[i.address])??null:null},clearSiweSession:(t,n)=>{const a=ot(t,n);a&&e(e=>{const t={...e.siweSessions},n=e.siweSessions[a.chainId];if(!n)return e;const i={...n};delete i[a.address],0===Object.keys(i).length?delete t[a.chainId]:t[a.chainId]=i;const{currentAccount:r}=st.getState();return{siweSessions:t,currentSession:r&&null!=Ke&&Ke===a.chainId&&r.toLowerCase()===a.address?{isLoggedIn:!1,token:null,expiresAt:null,address:null}:e.currentSession}})},setPrivateKey_TruthBox:(t,n,a,i)=>{const r=ot(a,i);r&&t&&e(e=>{const{rootClone:a,entry:i}=pt(e.truthBoxKeys,r.chainId,r.address,lt);return i[t]=n,dt(a,r.chainId,r.address,i),{truthBoxKeys:a}})},getPrivateKey_TruthBox:(e,n,a)=>{var i,r;const s=ot(n,a);return s&&e?(null==(r=null==(i=t().truthBoxKeys[s.chainId])?void 0:i[s.address])?void 0:r[e])??null:null},clearPrivateKey_TruthBox:(t,n,a)=>{const i=ot(n,a);i&&t&&e(e=>{const n={...e.truthBoxKeys},a=e.truthBoxKeys[i.chainId];if(!a)return e;const r={...a},s={...r[i.address]??{}};return delete s[t],0===Object.keys(s).length?delete r[i.address]:r[i.address]=s,0===Object.keys(r).length?delete n[i.chainId]:n[i.chainId]=r,{truthBoxKeys:n}})},clearAccountData:(t,n)=>{const a=ot(n,t);a&&e(e=>{const t={...e.eip712Permits},n={...e.siweSessions},i={...e.truthBoxKeys},r=t[a.chainId];if(r){const e={...r};delete e[a.address],0===Object.keys(e).length?delete t[a.chainId]:t[a.chainId]=e}const s=n[a.chainId];if(s){const e={...s};delete e[a.address],0===Object.keys(e).length?delete n[a.chainId]:n[a.chainId]=e}const o=i[a.chainId];if(o){const e={...o};delete e[a.address],0===Object.keys(e).length?delete i[a.chainId]:i[a.chainId]=e}const{currentAccount:u}=st.getState();return{eip712Permits:t,siweSessions:n,truthBoxKeys:i,currentSession:u&&null!=Ke&&Ke===a.chainId&&u.toLowerCase()===a.address?{isLoggedIn:!1,token:null,expiresAt:null,address:null}:e.currentSession}})},clearAll:()=>e({eip712Permits:{},siweSessions:{},truthBoxKeys:{},currentSession:{isLoggedIn:!1,token:null,expiresAt:null,address:null}})})),yt=()=>{const{address:t,isConnected:n}=O(),a=F(),i=rt(a,t||U),{isSessionValid:r}=tt(),s=ct(e=>e.currentSession),o=ct(e=>e.setSiweSession),u=ct(e=>e.clearSiweSession);e.useEffect(()=>{!n&&s.isLoggedIn&&u(a,s.address??void 0)},[n,s.isLoggedIn,s.address,a,u]),e.useEffect(()=>{s.isLoggedIn&&s.address&&t&&s.address.toLowerCase()!==t.toLowerCase()&&u(a,s.address)},[t,s.isLoggedIn,s.address,a,u]);const l=e.useCallback(async e=>{if(!t){new Error("The wallet is not connected, please connect the wallet first");return null}const n=await i.login(e);if(!n)return null;const{sessionInfo:r}=n;return o(r,a,t),n},[t,a,i,o]),p=e.useCallback(()=>{if(!s.isLoggedIn)return!1;if(!s.token)return!1;if(t&&s.address&&s.address.toLowerCase()!==t.toLowerCase())return!1;if(s.expiresAt){const e=new Date;if(s.expiresAt<e)return u(a,s.address??void 0),!1}return!0},[s,t,a,u]),d=e.useMemo(()=>p(),[s.isLoggedIn,s.token,s.address,s.expiresAt,t,p]);e.useEffect(()=>{if(!s.expiresAt||!s.isLoggedIn)return;const e=Date.now(),t=s.expiresAt.getTime()-e;if(t<=0)return void u(a,s.address??void 0);const n=setTimeout(()=>{u(a,s.address??void 0)},t);return()=>clearTimeout(n)},[s.expiresAt,s.isLoggedIn,s.address,a,u]);const c=e.useCallback(async()=>{if(!p())return!1;try{if("function"!=typeof r)throw new Error("SIWE session validation interface not initialized");return!!(await r(s.token))||(u(a,s.address??void 0),!1)}catch(e){return u(a,s.address??void 0),!1}},[s,r,u,a,p]);return{login:l,logout:e.useCallback(()=>{u(a,s.address??t??void 0)},[u,a,s.address,t]),validateSession:c,isSessionValidLocal:p,session:s,isValidateSession:d,isLoading:i.isLoading,error:i.error,reset:i.reset}};function mt(){const{readContract:e}=et();return{myUserId:async t=>{try{const n=await e({contractName:ie.USER_ID,functionName:"myUserId",args:[t]});return n?Number(n):0}catch(n){return 0}},isBlacklisted:async(t,n=!1)=>{try{const a=await e({contractName:ie.USER_ID,functionName:"isBlacklisted",args:[t],force:n});return!!a&&Boolean(a)}catch(a){return!1}}}}const ft=3,bt=5e3,gt=[{url:"https://ipfs.io/ipfs/{cid}",isHealthy:!0,lastCheck:0,responseTime:0,failureCount:0},{url:"https://gateway.pinata.cloud/ipfs/{cid}",isHealthy:!0,lastCheck:0,responseTime:0,failureCount:0},{url:"https://dweb.link/ipfs/{cid}",isHealthy:!0,lastCheck:0,responseTime:0,failureCount:0}],xt=async e=>{try{const t="bafkreiaurkeqxw6mfkqua3msyllwtutrlgdt3ye3xf7senwcjpado7dvby",n=Date.now(),a=new AbortController,i=setTimeout(()=>a.abort(),bt),r=await fetch(e.url.replace("{cid}",t),{signal:a.signal});return clearTimeout(i),r.ok?(e.responseTime=Date.now()-n,e.failureCount=0,e.isHealthy=!0,e.lastCheck=Date.now(),!0):(e.failureCount++,e.failureCount>=ft&&(e.isHealthy=!1),e.lastCheck=Date.now(),!1)}catch(t){return e.failureCount++,e.failureCount>=ft&&(e.isHealthy=!1),e.lastCheck=Date.now(),!1}},ht=async()=>{await Promise.all(gt.map(xt))},Tt=()=>gt.map(e=>({url:e.url,isHealthy:e.isHealthy,responseTime:e.responseTime,failureCount:e.failureCount,lastCheck:e.lastCheck}));let vt="https://ipfs.io/ipfs/{cid}";const wt=e=>{e.includes("{cid}")&&(vt=e)};function It(e,t=18,n=3){if(!e||"0"===e||"0n"===e)return"0.000";try{const a="string"==typeof e&&e.includes("n")?BigInt(e.replace("n","")):"string"==typeof e?BigInt(e):"bigint"==typeof e?e:BigInt(Math.floor(e)),i=q(a,t),r=parseFloat(i);return r>=1e6?`${(r/1e6).toFixed(2)}M`:r>=1e3?`${(r/1e3).toFixed(2)}K`:r.toFixed(n)}catch(a){return"0.000"}}const St=({price:n,symbol:a="ETH",decimals:r=18,precision:s=3,showSymbol:o=!0,className:u="",size:l="sm",unitPosition:p="right",responsive:d=!0})=>{const c=e.useMemo(()=>{try{const e=It(n,r,s);if(/[KM]$/.test(e)){const t=e.match(/^([\d.]+)([KM])$/);if(t){const e=t[1],n=t[2],a=parseFloat(e);if(Number.isInteger(a))return`${a}${n}`;const i=e.split(".");if(2===i.length&&/^0+$/.test(i[1]))return`${i[0]}${n}`}return e}const t=parseFloat(e);if(Number.isInteger(t))return t.toString();const a=e.split(".");if(2===a.length){const e=a[1];if(/^0+$/.test(e))return a[0]}return e}catch(e){return"0"}},[n,r,s]),y=e.useMemo(()=>({sm:"text-xs md:text-sm lg:text-base",md:"text-sm md:text-md lg:text-lg",lg:"text-lg md:text-xl lg:text-2xl",xl:"text-xl md:text-2xl lg:text-3xl"}),[l]),m=e.useMemo(()=>({sm:"text-xs md:text-sm",md:"text-sm md:text-base ",lg:"text-md md:text-lg ",xl:"text-lg md:text-xl "}),[l]),f=e.useMemo(()=>{try{const e="bigint"==typeof n?n:"string"==typeof n?n.includes("n")?BigInt(n.replace("n","")):BigInt(n):BigInt(Math.floor(Number(n)||0));return q(e,r)}catch{return c}},[n,r,c]),b=t.jsx("p",{className:ne("text-white",y[l],u),children:c}),g=o&&a?t.jsx("p",{className:ne(m[l],"text-muted-foreground"),children:a}):null,h=[];"left"===p&&g&&h.push(g);const T=f!==c?t.jsx(x,{title:f,children:b}):b;return h.push(T),"right"===p&&g&&h.push(g),t.jsx("div",{className:ne("inline-flex items-end",d?"gap-2":"gap-1","font-mono"),children:h.map((e,n)=>t.jsx(i.Fragment,{children:e},`price-label-${n}`))})},Ct=e=>{if(!e)return"";let t,n=e;return n.endsWith(".ipfs.w3s.link/")&&n.startsWith("https://")?n:(n.endsWith(".ipfs.w3s.link/")?n=n.slice(0,-15):n.endsWith("/")&&(n=n.slice(0,-1)),t=n.startsWith("ipfs://")?n.substring(7):n.startsWith("bafkre")||n.startsWith("Qm")?n:n.startsWith("https://")?n.substring(8):n,(e=>vt.replace("{cid}",e))(t))},At=({images:n,aspectRatio:a=1,autoPlayInterval:i=4e3,autoPlay:r=!0,className:s,altPrefix:o="image",transitionDuration:u=2,enableMask:l=!0,enableIpfsUrl:p=!0,onImageLoad:d})=>{const[c,y]=e.useState(0),[m,f]=e.useState("lt"),b=e.useRef(null),g=()=>{const e=["lt","rt","lb","rb"];return e[Math.floor(Math.random()*e.length)]},x=e.useCallback(()=>{n.length<=1||(f(g()),y(e=>(e+1)%n.length))},[n.length]);e.useCallback(e=>{e<0||e>=n.length||e===c||(f(g()),y(e))},[n.length,c]);const h=e.useRef(x);if(e.useEffect(()=>{h.current=x},[x]),e.useEffect(()=>{if(r&&!(n.length<=1))return b.current=setInterval(()=>{h.current()},i),()=>{b.current&&clearInterval(b.current)}},[r,i,n.length]),!n||0===n.length)return t.jsx("div",{className:ne("w-full bg-black flex items-center justify-center rounded-t-2xl",s),style:{aspectRatio:a},children:t.jsx("span",{className:"text-white/50",children:"No images available"})});const T=e=>{if(!l)return{};const t={lt:"linear-gradient(135deg, #000 60%, transparent 100%)",rb:"linear-gradient(315deg, #000 60%, transparent 100%)",rt:"linear-gradient(225deg, #000 60%, transparent 100%)",lb:"linear-gradient(45deg, #000 60%, transparent 100%)"};return{maskImage:t[e],WebkitMaskImage:t[e]}},[v,w]=e.useState(new Set),I=e.useRef(!1),S=e.useCallback(e=>{w(t=>{const n=new Set(t);return n.add(e),n})},[]);return e.useEffect(()=>{if(v.size===n.length&&d&&!I.current){I.current=!0;const e=setTimeout(()=>{d()},0);return()=>clearTimeout(e)}},[v.size,n.length]),e.useEffect(()=>{w(new Set),I.current=!1},[n]),t.jsx("div",{className:ne("w-full bg-black flex justify-center items-center overflow-hidden rounded-t-2xl relative",s),style:{aspectRatio:a},children:t.jsx("div",{className:"w-full h-full relative",children:n.map((e,a)=>{const i=a===c,r=i||a===(c-1+n.length)%n.length,s=p?Ct(e):e;return t.jsx("img",{src:s,alt:`${o}-${a+1}`,className:ne("w-full h-full object-contain absolute left-0 top-0 pointer-events-none","transition-opacity ease-linear",i?"opacity-100 z-20":"opacity-0 z-10"),style:{transitionDuration:`${u}s`,...i&&l?T(m):{},transitionProperty:l?"opacity, mask-image, -webkit-mask-image":"opacity"},loading:r?"eager":"lazy",onLoad:()=>S(e),onError:t=>{S(e)}},`${s}-${a}`)})})})};function Et({status:e,className:n,disabled:a=!1,size:i="md",responsive:r=!0}){return t.jsx("div",{className:ne("inline-flex items-center justify-center","font-mono font-medium whitespace-nowrap","rounded-md border",(()=>{if(a)return"bg-gray-500/20 text-gray-400 border-gray-500/30";switch(e){case"Storing":default:return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"Selling":case"Auctioning":return"bg-orange-500/20 text-orange-400 border-orange-500/30";case"Paid":return"bg-green-500/20 text-green-400 border-green-500/30";case"Refunding":return"bg-red-500/20 text-red-400 border-red-500/30";case"InSecrecy":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"Published":return"bg-lime-500/20 text-lime-400 border-lime-500/30"}})(),(()=>{switch(i){case"sm":return"text-xs px-1.5 py-0.5";case"lg":return"text-base px-2.5 py-1";default:return"text-sm px-2 py-0.5"}})(),r&&"text-xs sm:text-sm",n),title:e,children:e})}const kt=P("https://ipdrhlnenaanblmsvwya.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlwZHJobG5lbmFhbmJsbXN2d3lhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM3NzY1NzcsImV4cCI6MjA3OTM1MjU3N30.3isevcJbhdatRWAZFIs3lFAqva0p0IKxKJjLBNJj6Jo",{auth:{persistSession:!0,autoRefreshToken:!0}}),Mt=(e,t,n)=>{if(null==t)return e;let a=0;if("number"==typeof t)a=t;else if("string"==typeof t){const e=Number(t);a=Number.isNaN(e)?0:e}if(0===a)return e;if(Math.floor(Date.now()/1e3)<=a)return e;if("Selling"===e||"Auctioning"===e){return null!=n&&""!==n&&0!==n?"Paid":"Published"}return"InSecrecy"===e?"Published":e};function Nt({children:n,className:a,size:i="sm",type:r="default"}){const s=e.useMemo(()=>({xs:"text-xxs md:text-xs lg:text-sm",sm:"text-xs md:text-sm lg:text-md",md:"text-sm md:text-md lg:text-base",lg:"text-md md:text-base lg:text-lg"}),[i]),o=e.useMemo(()=>({default:"text-muted-foreground",primary:"text-primary",secondary:"text-secondary",error:"text-error",warning:"text-warning",info:"text-info",success:"text-success"}),[r]);return t.jsx("p",{className:ne(s[i],o[r],a),children:n})}function Rt({children:e,className:n}){return t.jsx("p",{className:ne("text-xs text-white/80 md:text-md lg:text-base",n),children:e})}const _t=e=>{const t=window.atob(e);return"0x"+Array.from(t,e=>("0"+e.charCodeAt(0).toString(16)).slice(-2)).join("")},jt=e=>{var t;const n=(null==(t=(e.startsWith("0x")?e.slice(2):e).match(/.{1,2}/g))?void 0:t.map(e=>String.fromCharCode(parseInt(e,16))).join(""))||"";return window.btoa(n)};class Bt{static async cryptoKeyToBase64(e){const t=await window.crypto.subtle.exportKey("raw",e),n=String.fromCharCode(...new Uint8Array(t));return btoa(n)}static async base64ToCryptoKey(e,t={name:"AES-GCM"}){const n=atob(e),a=new Uint8Array(n.length);for(let i=0;i<n.length;i++)a[i]=n.charCodeAt(i);return await window.crypto.subtle.importKey("raw",a,t,!0,["encrypt","decrypt"])}static arrayBufferToBase64(e){let t="";const n=new Uint8Array(e),a=n.byteLength;for(let i=0;i<a;i++)t+=String.fromCharCode(n[i]);return window.btoa(t)}static base64ToArrayBuffer(e){const t=window.atob(e),n=t.length,a=new Uint8Array(n);for(let i=0;i<n;i++)a[i]=t.charCodeAt(i);return a.buffer}static async cryptoKeyToBase64_ECDH(e,t){const n=t?"spki":"pkcs8",a=await window.crypto.subtle.exportKey(n,e);return this.arrayBufferToBase64(a)}static async base64ToCryptoKey_ECDH(e,t){const n=this.base64ToArrayBuffer(e),a=t?"spki":"pkcs8",i=t?[]:["deriveKey"];return await window.crypto.subtle.importKey(a,n,{name:"ECDH",namedCurve:"P-256"},!0,i)}static async generateKeyPair(){const{publicKey:e,privateKey:t}=await window.crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]),n=await this.cryptoKeyToBase64_ECDH(t,!1),a=await this.cryptoKeyToBase64_ECDH(e,!0);return{privateKey_bytes:_t(n),publicKey_bytes:_t(a)}}static async generateSharedKey(e,t){const n=jt(e),a=jt(t),i=await this.base64ToCryptoKey_ECDH(n,!0),r=await this.base64ToCryptoKey_ECDH(a,!1),s=await window.crypto.subtle.deriveKey({name:"ECDH",public:i},r,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),o=await this.cryptoKeyToBase64(s);return _t(o)}static async encryptBase(e,t){const n=jt(t),a=await this.base64ToCryptoKey(n),i=window.crypto.getRandomValues(new Uint8Array(12)),r=(new TextEncoder).encode(e),s=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:i},a,r),o=this.arrayBufferToBase64(i.buffer),u=this.arrayBufferToBase64(s);return{iv_bytes:_t(o),encrypted_bytes:_t(u)}}static async decryptBase(e,t,n){const a=jt(e),i=jt(t),r=jt(n),s=this.base64ToArrayBuffer(a),o=this.base64ToArrayBuffer(i),u=await this.base64ToCryptoKey(r);if(!u)throw new Error("shareKey is null");const l=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:s},u,o);return(new TextDecoder).decode(l)}}class Dt{static async encrypt(e,t,n){if(!e||!t||!n)return{success:!1,error:"Missing required parameters: publicKey, privateKey, fileCid, or password is empty"};try{const a=await Bt.generateSharedKey(e,t);if(!a)return{success:!1,error:"Failed to generate shared key"};const{iv_bytes:i,encrypted_bytes:r}=await Bt.encryptBase(n,a);return n===await Bt.decryptBase(i,r,a)?{success:!0,data:{iv_bytes:i,encrypted_bytes:r}}:{success:!1,error:"Encryption verification failed"}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Unknown encryption error"}}}static async encryptList(e,t,n){if(!e||!t||!n)return{success:!1,error:"Missing required parameters"};try{let a=[];for(const i of n){const n=await this.encrypt(e,t,i);if(!n.success||!n.data){return{success:!1,error:n.error||"Encryption failed"}}a.push(n.data)}return{success:!0,data:a}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Unknown encryption error"}}}}class Pt{static async decrypt(e,t,n,a){if(!(e&&t&&n&&a))return{success:!1,error:"Missing required parameters"};try{const i=await Bt.generateSharedKey(e,t);if(!i)return{success:!1,error:"Failed to generate shared key"};return{success:!0,data:await Bt.decryptBase(n,a,i)}}catch(i){return{success:!1,error:i instanceof Error?i.message:"Unknown decryption error"}}}static async decryptList(e,t,n){if(!e||!t||!n)return{success:!1,error:"Missing required parameters"};try{let a=[];for(const i of n){const n=await this.decrypt(e,t,i.iv_bytes,i.encrypted_bytes);if(!n.success||!n.data){return{success:!1,error:n.error||"Decryption failed"}}a.push(n.data)}return{success:!0,data:a}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Unknown decryption error"}}}}const Ot={generateKeyPair:Bt.generateKeyPair.bind(Bt),generateSharedKey:Bt.generateSharedKey.bind(Bt),encryptBase:Bt.encryptBase.bind(Bt),decryptBase:Bt.decryptBase.bind(Bt),encrypt:Dt.encrypt.bind(Dt),encryptList:Dt.encryptList.bind(Dt),decrypt:Pt.decrypt.bind(Pt),decryptList:Pt.decryptList.bind(Pt)},Ft=e=>(e=>{const t="string"==typeof e?parseInt(e):e,n=new Date(t>=1e10?t:1e3*t);return`${n.getFullYear()}/${String(n.getMonth()+1).padStart(2,"0")}/${String(n.getDate()).padStart(2,"0")} ${String(n.getHours()).padStart(2,"0")}:${String(n.getMinutes()).padStart(2,"0")}:${String(n.getSeconds()).padStart(2,"0")}`})(e);var Lt=(e=>(e[e.VIEW=0]="VIEW",e[e.TRANSFER=1]="TRANSFER",e[e.APPROVE=2]="APPROVE",e))(Lt||{});const Wt=(t,n)=>{const{signTypedDataAsync:a}=z(),[i,r]=e.useState(!1),[s,o]=e.useState(null),[u,l]=e.useState(null),p=(e,t)=>{if(!V(e))throw new Error(`The ${t} address format is invalid: ${e}`)};return{signPermit:e.useCallback(async e=>{const{spender:i,amount:s,label:u,contractAddress:d,domainName:c,domainVersion:y,customDeadline:m}=e;o(null),r(!0);try{if(!n||!t)throw new Error("Please connect your wallet first");if(p(d,"token"),p(i,"spender"),!c)throw new Error("The domain name is not valid");const e="bigint"==typeof s?s:BigInt(s);if(Number(e)<0)throw new Error("The amount cannot be negative");if(!Object.values(Lt).includes(u))throw new Error(`The permit type is invalid: ${u}`);if(u===Lt.VIEW&&0!==Number(e))throw new Error("The amount of VIEW type must be 0");const r=m||Math.floor(Date.now()/1e3)+3600,o=((e,t,n,a)=>({name:n,version:a||"1",chainId:e,verifyingContract:t}))(t,d,c,y),f={EIP712Permit:[{name:"label",type:"uint8"},{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"amount",type:"uint256"},{name:"deadline",type:"uint256"}]},b={label:u,owner:n,spender:i,amount:e,deadline:BigInt(r)};0;0;const g=(e=>{const t=e.slice(2);return{r:"0x"+t.slice(0,64),s:"0x"+t.slice(64,128),v:parseInt(t.slice(128,130),16)}})(await a({domain:o,types:f,primaryType:"EIP712Permit",message:b})),x={label:u,owner:n,spender:i,amount:e.toString(),deadline:r,signature:g};return l(x),x}catch(f){const e=f instanceof Error?f:new Error("Failed to generate EIP712 signature");return o(e),null}finally{r(!1)}},[t,n,a]),isLoading:i,error:s,permit:u,reset:e.useCallback(()=>{o(null),l(null),r(!1)},[])}},Kt=()=>{const{address:t,chainId:n}=ee(),{signPermit:a,isLoading:i,error:r}=Wt(n??0,t??""),s=Je(),o=ct(e=>e.getEip712Permit),u=ct(e=>e.setEip712Permit),[l,p]=e.useState(!1),[d,c]=e.useState(null),y=e.useCallback(e=>{if(!e.deadline)return!0;return Math.floor(Date.now()/1e3)>=e.deadline},[]),m=e=>"signature"in e&&"deadline"in e,f=e.useCallback((e,t)=>{if(m(e)&&!y(e))return null;let n;n=m(e)?(null==t?void 0:t.contractAddress)||"":e.contractAddress;const a=s.find(e=>e.address.toLowerCase()===n.toLowerCase());if(!a)throw new Error("Token metadata not found");const i=a.domainName;if(!i)throw new Error("Token domain name not found");let r,o,u,l,p;if(m(e))r=e.label,o=e.spender,u="bigint"==typeof e.amount||"string"==typeof e.amount?e.amount:BigInt(e.amount),l=null==t?void 0:t.domainVersion,p=null==t?void 0:t.customDeadline;else{const n=e;r=n.label,o=n.spender,u="number"==typeof n.amount?BigInt(n.amount):n.amount,l=n.domainVersion||(null==t?void 0:t.domainVersion),p=n.customDeadline||(null==t?void 0:t.customDeadline)}if(!o)throw new Error("Missing spender parameter");if(!n)throw new Error("Missing contractAddress parameter");return{label:r,spender:o,amount:u,contractAddress:n,domainName:i,domainVersion:l,customDeadline:p}},[y]),b=e.useCallback(async e=>{try{const t=f(e);if(!t)throw new Error("Failed to parse permit params");const n=await a(t);if(!n)throw new Error("Failed to generate signature");return u(e.label,e.spender,e.contractAddress,n),n}catch(t){const e=t instanceof Error?t:new Error("Failed to generate EIP712 signature");throw c(e),e}},[t,n,a,u,f]),g=e.useCallback((e,t,n)=>{const a=o(e,t,n);return a&&!y(a)&&a.label===e&&a.spender===t?a:null},[o,y]);return{getValidPermit:e.useCallback(async(e,t)=>{c(null),p(!0);try{if(m(e)&&!y(e))return e;const n=f(e,t);if(!n){if(m(e))return e;throw new Error("Unexpected error: failed to parse permit params")}const{label:a,spender:i,contractAddress:r}=n,s=g(a,i,r);if(s)return s;return await b(n)}catch(n){const e=n instanceof Error?n:new Error("Failed to get valid permit");throw c(e),e}finally{p(!1)}},[t,n,y,f,o,b]),isExpired:y,signAndSavePermit:b,getCurrentEip712Permit:g,isLoading:l||i,error:d||r}};function Ht(){const t=n(),{publicClient:a,chainId:i}=ee(),r=e.useRef(a);r.current=a;return{readContractERC20:e.useCallback(async(e,n,s,o,u=!1)=>{let l=r.current||a;if(!l){const e=3e3,t=Date.now();for(;!l&&Date.now()-t<e;)await new Promise(e=>setTimeout(e,50)),l=r.current||a}if(!l)throw new Error("Public client not available. Please ensure WagmiProvider is properly configured.");const p=Ge("erc20"===e?ie.OFFICIAL_TOKEN:ie.ERC20_SECRET,i);let d=[],c={};o&&o.length>0?(d=[e,n,s,o,i],c={address:n,abi:p.abi,functionName:s,args:o}):(d=[e,n,s,i],c={address:n,abi:p.abi,functionName:s});if(u){const e=t.getQueryState(d);if(null==e?void 0:e.dataUpdatedAt){if(Date.now()-e.dataUpdatedAt<15e3)return e.data}t.removeQueries({queryKey:d})}else{const e=t.getQueryData(d);if(e)return e}const y=await l.readContract(c);return t.setQueryData(d,y),y},[i,t])}}function Ut(){const{readContractERC20:e}=Ht();return{allowance:async(t,n,a,i=!1)=>{try{const r=await e("erc20",t,"allowance",[n,a],i);return"bigint"==typeof r?r:"number"==typeof r||"string"==typeof r?BigInt(r):BigInt(0)}catch(r){return BigInt(0)}},balanceOf:async(t,n,a=!1)=>{try{const i=await e("erc20",t,"balanceOf",[n],a);return"bigint"==typeof i?i:"number"==typeof i||"string"==typeof i?BigInt(i):BigInt(0)}catch(i){return BigInt(0)}},decimals:async t=>{try{const n=await e("erc20",t,"decimals",[]);return n?Number(n):0}catch(n){return 0}},name:async t=>{try{const n=await e("erc20",t,"name",[]);return n?String(n):""}catch(n){return""}},symbol:async t=>{try{const n=await e("erc20",t,"symbol",[]);return n?String(n):""}catch(n){return""}},totalSupply:async(t,n=!1)=>{try{const a=await e("erc20",t,"totalSupply",[],n);return"bigint"==typeof a?a:"number"==typeof a||"string"==typeof a?BigInt(a):BigInt(0)}catch(a){return BigInt(0)}},mintDate:async(t,n,a=!1)=>{try{const i=await e("erc20",t,"mintDate",[n],a);return i?Number(i):0}catch(i){return 0}}}}function qt(){const{readContractERC20:e}=Ht();return{underlyingToken:async t=>{try{const n=await e("secret",t,"underlyingToken");return n?String(n):""}catch(n){return""}},balanceOfWithPermit:async(t,n,a=!1)=>{try{const i=await e("secret",t,"balanceOfWithPermit",[n],a);return"bigint"==typeof i?i:"number"==typeof i||"string"==typeof i?BigInt(i):BigInt(0)}catch(i){return BigInt(0)}},allowanceWithPermit:async(t,n,a=!1)=>{try{const i=await e("secret",t,"allowanceWithPermit",[n],a);return"bigint"==typeof i?i:"number"==typeof i||"string"==typeof i?BigInt(i):BigInt(0)}catch(i){return BigInt(0)}},DOMAIN_SEPARATOR:async t=>{try{const n=await e("secret",t,"DOMAIN_SEPARATOR");return n?String(n):""}catch(n){return""}},EIP_PERMIT_TYPEHASH:async t=>{try{const n=await e("secret",t,"EIP_PERMIT_TYPEHASH");return n?String(n):""}catch(n){return""}},isSignatureUsed:async(t,n,a=!1)=>{try{const i=await e("secret",t,"isSignatureUsed",[n],a);return!!i&&Boolean(i)}catch(i){return!1}}}}const zt=()=>{const[t,n]=e.useState(!1),[a,i]=e.useState(BigInt(0)),[r,s]=e.useState(!1),{allowance:o}=Ut(),{allowanceWithPermit:u}=qt(),{getValidPermit:l}=Kt(),p=Je();return{readAllowance:async(e,t,a,r,d=!1)=>{n(!0);try{const c=p.find(t=>t.address.toLowerCase()===e.toLowerCase());if(!c)throw new Error("Token metadata not found");let y=BigInt(0);if("ERC20"===c.types)y=await o(e,t,a,d);else{if("Secret"!==c.types)return n(!1),{isEnough:!1,allowanceAmount:BigInt(0)};{const t=await l({spender:a,amount:BigInt(0),label:Lt.VIEW,contractAddress:e});y=await u(e,t,d)}}const m=y>=(e=>{if("bigint"==typeof e)return e;if("number"==typeof e){if(!Number.isFinite(e)||!Number.isInteger(e))throw new Error("targetAmount must be an integer number");if(!Number.isSafeInteger(e))throw new Error("targetAmount number exceeds safe integer range; pass bigint or integer string");return BigInt(e)}if("string"==typeof e){if(!/^\d+$/.test(e))throw new Error("targetAmount string must be an integer representation");return BigInt(e)}throw new Error("Unsupported targetAmount type")})(r);return s(m),i(y),n(!1),{isEnough:m,allowanceAmount:y}}catch(c){return n(!1),{isEnough:!1,allowanceAmount:BigInt(0)}}},isLoading:t,allowanceAmount:a,isEnough:r}};async function Vt(e){const{network:t,layer:n}=He;try{const{data:a,error:i}=await kt.from("box_rewards").select("*").eq("network",t).eq("layer",n).eq("box_id",e);if(i)return{boxRewardsData:null,error:i};const r=a?a.map(e=>function(e){var t;const n=D(e,{deep:!0});return{id:n.id||"",boxId:n.boxId||e.box_id.toString(),rewardType:n.rewardType||n.reward_type||"",token:n.token||"",rewardAmount:(null==(t=n.amount)?void 0:t.toString())||"0"}}(e)):[];return{boxRewardsData:r.length>0?r:null,error:null}}catch(a){return{boxRewardsData:null,error:Zt(a)}}}async function $t(e,t){try{const{network:n,layer:a}=He;let i=null;if(t){const{data:r,error:s}=await kt.from("box_user_order_amounts").select("*").eq("network",n).eq("layer",a).eq("box_id",e).eq("user_id",t);if(s)return{orderAmountsData:null,error:s};r&&Array.isArray(r)&&(i=r.map(e=>function(e){var t,n,a;const i=D(e,{deep:!0});return{id:i.id||"",userId:i.userId||(null==(t=i.user_id)?void 0:t.toString())||"",boxId:i.boxId||(null==(n=i.box_id)?void 0:n.toString())||"",token:i.token||"",amount:(null==(a=i.amount)?void 0:a.toString())||"0"}}(e)))}return{orderAmountsData:i&&i.length>0?i:null,error:null}}catch(n){return{orderAmountsData:null,error:Zt(n)}}}function Zt(e){return e?"object"==typeof e&&"message"in e?e:new Error("Unknown Supabase error"):null}const Gt=(t,n,a)=>{const{network:i,layer:s}=He,o=!!t&&!!n&&""!==n.trim()&&a.includes("Bidder"),u=e.useMemo(()=>JSON.stringify([...a].sort()),[a]),{data:l,isLoading:p,error:d,isFetching:c}=r({queryKey:["box-order-amounts",i,s,t,n,u],queryFn:async()=>{const e=await $t(t,n);if(e.error)throw e.error;return e},staleTime:3e5,enabled:o});return{orderAmountsData:e.useMemo(()=>{if(null==l?void 0:l.orderAmountsData)return l.orderAmountsData},[null==l?void 0:l.orderAmountsData]),isLoading:p||c,error:d||null}};async function Xt(e){try{const{network:t,layer:n}=He,{data:a,error:i}=await kt.from("boxes").select("*").eq("network",t).eq("layer",n).eq("id",e).single();if(i)return{box:null,metadataBox:null,error:i};if(!a)return{box:null,metadataBox:null,error:null};const{data:r,error:s}=await kt.from("metadata_boxes").select("*").eq("network",t).eq("layer",n).eq("id",e).maybeSingle(),o=r||null,u=function(e){const t=D(e,{deep:!0});return{...t,status:Mt(t.status,t.deadline,t.buyerId||t.buyer_id),biddersIds:t.biddersIds||[],acceptedToken:t.acceptedToken??void 0,listedMode:t.listedMode??void 0}}(a),l=o?function(e){var t,n;const a=e.encryption_slices_metadata_cid||{},i=e.encryption_passwords||{},r=Array.isArray(e.encryption_file_cid)?e.encryption_file_cid:[],s={slicesMetadataCID_encryption:a.slicesMetadataCID_encryption??a.slicesMetadataCidEncryption??a.slices_metadata_cid_encryption??"",slicesMetadataCID_iv:a.slicesMetadataCID_iv??a.slicesMetadataCidIv??a.slices_metadata_cid_iv??""},o={password_encryption:i.password_encryption??i.passwordEncryption??i.password_encryption??"",password_iv:i.password_iv??i.passwordIv??i.password_iv??""},u=r.map(e=>({fileCID_encryption:e.fileCID_encryption??e.fileCidEncryption??e.file_cid_encryption??"",fileCID_iv:e.fileCID_iv??e.fileCidIv??e.file_cid_iv??""}));return{project:e.project,website:e.website,name:e.name,tokenId:(null==(n=null==(t=e.id)?void 0:t.toString)?void 0:n.call(t))??"",typeOfCrime:e.type_of_crime??"",label:e.label??[],title:e.title??"",nftImage:e.nft_image??"",boxImage:e.box_image??"",country:e.country??"",state:e.state??"",description:e.description??"",eventDate:e.event_date??"",createDate:e.create_date??"",timestamp:Number(e.timestamp??0),mintMethod:e.mint_method,fileList:e.file_list??[],encryptionSlicesMetadataCID:s,encryptionFileCID:u,encryptionPasswords:o,publicKey:e.public_key??""}}(o):null;return{box:u,metadataBox:l,error:null}}catch(t){return{box:null,metadataBox:null,error:Yt(t)}}}function Yt(e){return e?"object"==typeof e&&"message"in e?e:new Error("Unknown Supabase error"):null}const Jt=(t,n)=>{const{network:a,layer:i}=He,s=!!t&&!!n&&"Storing"!==n.listedMode&&"Selling"!==n.listedMode&&""!==n.buyerId,o=n.listedMode||"",{data:u,isLoading:l,error:p,isFetching:d}=r({queryKey:["box-bidders",a,i,t,o],queryFn:async()=>{const e=await async function(e,t){const{network:n,layer:a}=He;try{let i=null;if("Auctioning"===t){const{data:t,error:r}=await kt.from("box_bidders").select("bidder_id").eq("network",n).eq("layer",a).eq("id",e);if(r)return{biddersIds:null,error:r};t&&Array.isArray(t)&&(i=t.map(e=>{const t=e.bidder_id;return"string"==typeof t?t:"bigint"==typeof t?t.toString():(null==t?void 0:t.toString())||""}).filter(e=>""!==e))}return{biddersIds:i&&i.length>0?i:null,error:null}}catch(p){return{biddersIds:null,error:Yt(p)}}}(t,o);if(e.error)throw e.error;return e},staleTime:3e5,enabled:s});return{biddersIds:e.useMemo(()=>{if(null==u?void 0:u.biddersIds)return u.biddersIds},[null==u?void 0:u.biddersIds]),isLoading:l||d,error:p||null}},Qt={userState:{roles:[]},modalStatus:{SellAuction:"close",ExtendDeadline:"close",ViewFile:"close",BuyBidPay:"close"}},en=a()(B(e=>({...Qt,updateUserState:t=>e(e=>({userState:{...e.userState,...t}}),!1,"updateUserState"),updateModalStatus:(t,n)=>e(e=>({modalStatus:{...e.modalStatus,[t]:n}}),!1,"updateModalStatus")}))),tn=e.createContext(void 0),nn=({boxId:n,children:a})=>{const{box:i,metadataBox:s,isLoading:o}=(t=>{const{network:n,layer:a}=He,{data:i,isLoading:s,error:o,isFetching:u}=r({queryKey:["box-detail",n,a,t],queryFn:async()=>{const e=await Xt(t);if(e.error)throw e.error;return e},staleTime:3e5,enabled:!!t});return{box:e.useMemo(()=>{if(null==i?void 0:i.box)return i.box},[null==i?void 0:i.box]),metadataBox:e.useMemo(()=>{if(null==i?void 0:i.metadataBox)return i.metadataBox},[null==i?void 0:i.metadataBox]),boxId:t,isLoading:s||u,error:o||null}})(n),u=(e=>{if(!e)return;const{deadline:t,requestRefundDeadline:n,reviewDeadline:a}=e;let i=!1,r=!0,s=!0;const o=Math.floor(Date.now()/1e3);return t&&(i=Number(t)>o),n&&(r=Number(n)>o),a&&(s=Number(a)>o),{isInRequestRefundDeadline:r,isInReviewRefundDeadline:s,isInDeadline:i,isInExtendDeadlineTimeWindow:o>Number(t)-Ve.deadlineExtensionWindow}})(i||{}),{address:l}=ee()||{},p=st(e=>{var t,n;if(!l||!Ke)return null;const a=e.accounts[Ke];if(!a)return null;const i=(null==(t=a[l])?void 0:t.userId)??(null==(n=a[l.toLowerCase()])?void 0:n.userId)??null;return i&&""!==i.trim()?i:null}),{boxRewardsData:d,isLoading:c}=((t,n)=>{const{network:a,layer:i}=He,s=!(!t||!n||""===n.listedMode||"InSecrecy"!==n.status&&"Published"!==n.status),{data:o,isLoading:u,error:l,isFetching:p}=r({queryKey:["box-rewards",a,i,t],queryFn:async()=>{const e=await Vt(t);if(e.error)throw e.error;return e},staleTime:3e5,enabled:s});return{boxRewardsData:e.useMemo(()=>{if(null==o?void 0:o.boxRewardsData)return o.boxRewardsData},[null==o?void 0:o.boxRewardsData]),isLoading:u||p,error:l||null}})(n,i||{}),{biddersIds:y,isLoading:m}=Jt(n,i||{}),f=en(e=>e.userState.roles),{orderAmountsData:b,isLoading:g}=Gt(n,p||"",f),x=e.useMemo(()=>({box:i,boxId:n,metadataBox:s,isLoading:o||!i,deadlineCheckState:u,boxRewardsData:d,isLoadingRewards:c,biddersIds:y,isLoadingBidders:m,orderAmountsData:b,isLoadingOrderAmounts:g}),[i,n,s,o,u,d,c,y,m,b,g]);return t.jsx(tn.Provider,{value:x,children:a})},an=()=>{const t=e.useContext(tn);if(!t)throw new Error("useBoxContext must be used within BoxProvider");return t},rn=({tokenId:e})=>{const{box:n,metadataBox:a}=an();return n?t.jsxs("div",{className:"w-full space-y-6 md:space-y-8",children:[t.jsxs(h,{direction:"vertical",size:"middle",children:[t.jsxs(h,{direction:"horizontal",size:"middle",children:[t.jsx(Nt,{children:"Truth Box Id:"}),t.jsx(Nt,{children:e})]}),t.jsxs(h,{direction:"horizontal",size:"middle",children:[t.jsx(Nt,{children:"Minter:"})," ",t.jsx(Nt,{children:n.minterId})]}),t.jsxs(h,{direction:"horizontal",size:"middle",children:[t.jsx(Nt,{children:"Owner:"})," ",t.jsx(Nt,{children:n.ownerAddress})]}),t.jsxs(h,{direction:"horizontal",size:"middle",children:[t.jsx(Nt,{children:"Create date:"})," ",t.jsx(Nt,{children:(null==a?void 0:a.createDate)?new Date(null==a?void 0:a.createDate).toLocaleString():""})]})]}),t.jsx("div",{className:"w-full bg-black rounded-xl md:rounded-2xl overflow-hidden",children:t.jsx("div",{className:"aspect-video md:aspect-[4/3] lg:aspect-video",children:t.jsx(At,{images:[(null==a?void 0:a.boxImage)||"",(null==a?void 0:a.nftImage)||""],className:"w-full"})})}),t.jsx("div",{className:"space-y-4",children:t.jsx(Rt,{children:null==a?void 0:a.title})}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx(Nt,{children:null==a?void 0:a.country}),t.jsx(Nt,{children:null==a?void 0:a.state}),t.jsx(Nt,{children:null==a?void 0:a.eventDate})]}),t.jsx("hr",{className:"border-border/50"}),t.jsx("div",{className:"space-y-3",children:t.jsx(Nt,{children:null==a?void 0:a.description})})]}):t.jsx("div",{className:"w-full flex items-center justify-center py-12",children:t.jsx("div",{className:"text-muted-foreground text-lg font-mono",children:"Loading..."})})},sn=({children:e,className:n})=>t.jsx("div",{className:ne("flex flex-col md:flex-row w-full ","p-2 items-center gap-2 ","bg-background rounded-md md:rounded-xl",n),children:e}),on=({controller:e,className:n,onClick:a,children:i})=>{var r;return t.jsxs(sn,{className:n,children:[t.jsx(T,{onClick:()=>e.execute({onClick:a}),loading:e.isLoading,disabled:e.isDisabled,children:e.label}),t.jsxs("div",{className:"flex flex-col items-start",children:[(null==(r=e.error)?void 0:r.message)&&t.jsx(Nt,{type:"error",children:e.error.message}),e.description&&t.jsx("div",{className:"flex flex-col items-start",children:t.jsx(Nt,{size:"sm",children:e.description})}),i]})]})},un=a((e,t)=>({functionWriting:null,setFunctionWriting:t=>e({functionWriting:t}),reset:()=>e({functionWriting:null})})),ln=t=>{const{writeContractAsync:n,data:a,error:i,isPending:r,isError:s,isSuccess:o,status:u,reset:l}=$(),{isSuccess:p}=Z({hash:a}),{address:d}=ee(),[c,y]=e.useState(null),{setFunctionWriting:m}=un(),f=st(e=>e.addBoxInteraction);return e.useEffect(()=>{p&&c&&d&&t?Array.isArray(t)?t.forEach(e=>{f(e,c,a)}):f(t,c,a):s&&(l(),m(null))},[p,c,d,t,a,f,s,l]),{writeCustormV2:async e=>{const t=e.functionName;y(t),m(t);try{return await n({address:e.contract.address,abi:e.contract.abi,functionName:e.functionName,args:e.args})}catch(a){throw a}finally{m(null)}},hash:a,error:i,isPending:r,isLoading:"idle"!==u&&"error"!==u&&!p,isSuccess:o,status:u,isError:s,reset:l,isSuccessed:p}},pn=["sell","auction","publishByMinter"],dn=["sell","auction","publishByMinter"],cn=["sell","auction","publishByMinter"],yn=["buy","bid","publishByMinter"],mn=["buy","bid","publishByMinter"],fn=["requestRefund","completeOrder"],bn=["cancelRefund","agreeRefund","refuseRefund"],gn=["agreeRefund","cancelRefund","refuseRefund"],xn=["agreeRefund","cancelRefund","refuseRefund"],hn=["completeOrder","requestRefund","agreeRefund","refuseRefund"],Tn=["payConfiFee","publishByBuyer"],vn=["publishByMinter","publishByBuyer","sell","auction"],wn=t=>{const{boxId:n,box:a,deadlineCheckState:i}=an(),{userState:r,modalStatus:s}=en(e=>e),{address:o}=ee()||{},u=null==o?void 0:o.toLowerCase(),l=[],p=e.useMemo(()=>u&&Ke?e=>{var t,a;return(null==(a=null==(t=e.accounts[Ke])?void 0:t[u])?void 0:a.boxInteractions[n])??l}:()=>l,[u,n]),d=st(p);return e.useMemo(()=>{if(!a)return!1;const e=d.map(e=>e.functionWrote)||[],n=r.roles,{isInDeadline:o,isInRequestRefundDeadline:u,isInReviewRefundDeadline:l}=i||{},p=a.isInBlacklist||!1,c=a.status||"Storing",y=Number(a.purchaseTimestamp)||0,m=Number(a.reviewDeadline)||0,f=a.refundPermit||!1,b=!a.buyerId||""===a.buyerId,g=n.includes("Minter"),x=n.includes("Admin"),h=n.includes("Buyer"),T=n.includes("Bidder"),v=n.includes("Other"),w=0===n.length,I=()=>o?g:!w,S=t=>t.every(t=>!e.includes(t));switch(t){case"extendActive":return!p&&g&&o&&(null==i?void 0:i.isInExtendDeadlineTimeWindow)&&S(pn)&&"close"===s.ExtendDeadline;case"sellActive":return!p&&"Storing"===c&&I()&&S(dn)&&"close"===s.SellAuction;case"auctionActive":return!p&&"Storing"===c&&I()&&S(cn)&&"close"===s.SellAuction;case"buyActive":return!p&&0===y&&b&&"Selling"===c&&v&&S(yn);case"bidActive":return!p&&"Auctioning"===c&&(v||T)&&o&&S(mn);case"requestRefundActive":return!p&&!f&&u&&0===m&&"Paid"===c&&h&&S(fn);case"cancelRefundActive":return!p&&!f&&"Refunding"===c&&h&&S(bn);case"agreeRefundActive":return!p&&!f&&"Refunding"===c&&(l?x||g:!w)&&S(gn);case"refuseRefundActive":return!p&&!f&&"Refunding"===c&&x&&S(xn);case"completeActive":return!p&&0===m&&!f&&"Paid"===c&&(u?h:!w)&&S(hn);case"payConfiFeeActive":return!p&&"InSecrecy"===c&&(null==i?void 0:i.isInExtendDeadlineTimeWindow)&&!w&&S(Tn);case"publishActive":return!p&&("Storing"===c?g:"InSecrecy"===c&&h)&&S(vn);case"viewFileActive":return!p&&("Storing"===c||"Selling"===c||"Auctioning"===c?g:"InSecrecy"===c||"Paid"===c?h:("Refunding"===c||"Published"===c)&&!w);default:return!0}},[t,a,u,r.roles,d,s,n])},In=t=>{const n=Ye(),{box:a,boxId:i}=an(),r=en(e=>e.userState.roles),{functionWriting:s}=un(),{writeCustormV2:o,error:u,isLoading:l,isSuccessed:p}=ln(i),d=!t.activeKey||wn(t.activeKey),c=e.useMemo(()=>({box:a,boxId:i,roles:r}),[a,i,r]),y=e.useMemo(()=>e=>t.buildWrite?t.buildWrite(c,n,e):t.contract&&t.functionName&&t.getArgs&&a?{contract:t.contract(n),functionName:t.functionName,args:t.getArgs(c,n)}:null,[t,c,n,a]),m=e.useMemo(()=>y(void 0),[y]),f=t.pendingFunctions??(t.functionName?[t.functionName]:[]),b=f.length>0&&f.includes(s??""),g=null!==s&&!f.includes(s??""),x=!!t.allowedRoles&&!t.allowedRoles.some(e=>r.includes(e)),h=!!t.isDisabled&&t.isDisabled(c),T=!m&&!t.requiresCustomArgs,v=g||b||x||h||!d||T,w=e.useRef(null);e.useEffect(()=>{w.current=s},[s]);return{label:t.label,description:t.description,isLoading:b||l,isDisabled:v,isSuccessed:p,showApprove:!1,error:u,execute:async e=>{var n,a;const i=y(null==e?void 0:e.customArgs);i||!t.requiresCustomArgs?i&&(null==(a=null==e?void 0:e.onClick)||a.call(e),await o({contract:i.contract,functionName:i.functionName,args:i.args})):null==(n=null==e?void 0:e.onClick)||n.call(e)}}},Sn=e=>e.Exchange,Cn={buy:{id:"buy",label:"Buy",description:"Buy this box.",activeKey:"buyActive",requiresCustomArgs:!0},bid:{id:"bid",label:"Bid",description:"Bid for this box.",activeKey:"bidActive",requiresCustomArgs:!0},payConfiFee:{id:"payConfiFee",label:"PayConfiFee",activeKey:"payConfiFeeActive",requiresCustomArgs:!0},requestRefund:{id:"requestRefund",label:"Refund",description:"Request refund before the deadline.",contract:Sn,functionName:"requestRefund",getArgs:({boxId:e})=>[e],activeKey:"requestRefundActive"},cancelRefund:{id:"cancelRefund",label:"Cancel",description:"Cancel refund, the transaction will be completed.",contract:Sn,functionName:"cancelRefund",getArgs:({boxId:e})=>[e],activeKey:"cancelRefundActive"},agreeRefund:{id:"agreeRefund",label:"Agree",description:"Agree refund, funds will be returned to the buyer.",contract:Sn,functionName:"agreeRefund",getArgs:({boxId:e})=>[e],activeKey:"agreeRefundActive"},refuseRefund:{id:"refuseRefund",label:"Refuse",description:"Refuse refund, the transaction will be completed.",contract:Sn,functionName:"refuseRefund",getArgs:({boxId:e})=>[e],activeKey:"refuseRefundActive"},completeOrder:{id:"completeOrder",label:"Complete",description:"Complete the order: Paid  InSecrecy.",contract:Sn,functionName:"completeOrder",getArgs:({boxId:e})=>[e],activeKey:"completeActive"},publish:{id:"publish",label:"Publish",description:"Publish the box.",contract:e=>e.TruthBox,functionName:"publishByMinter",getArgs:({boxId:e})=>[e],activeKey:"publishActive",buildWrite:(e,t)=>{const{box:n,boxId:a,roles:i}=e;return n?"Storing"===n.status&&i.includes("Minter")?{contract:t.TruthBox,functionName:"publishByMinter",args:[a]}:"InSecrecy"===n.status&&i.includes("Buyer")?{contract:t.TruthBox,functionName:"publishByBuyer",args:[a]}:null:null}},sell:{id:"sell",label:"Sell",activeKey:"sellActive",requiresCustomArgs:!0,pendingFunctions:["sell"],buildWrite:(e,t,n)=>{if(!n)return null;const{acceptedToken:a,price:i}=n;return{contract:t.Exchange,functionName:"sell",args:[e.boxId,a,i]}}},auction:{id:"auction",label:"Auction",activeKey:"auctionActive",requiresCustomArgs:!0,pendingFunctions:["auction"],buildWrite:(e,t,n)=>{if(!n)return null;const{acceptedToken:a,price:i}=n;return{contract:t.Exchange,functionName:"auction",args:[e.boxId,a,i]}}},extendDeadline:{id:"extendDeadline",label:"Extend Deadline",description:"Extend the deadline of the box.",activeKey:"extendActive",requiresCustomArgs:!0},viewFile:{id:"viewFile",label:"View File",description:"View the confidential file.",activeKey:"viewFileActive",requiresCustomArgs:!0}},An=i.memo(({onClick:e,className:n})=>{const a=In(Cn.completeOrder),{roles:i}=en(e=>e.userState),{helperRewardRate:r}=We();return t.jsx(on,{controller:a,className:n,onClick:e,children:!i.includes("Buyer")&&t.jsxs(Nt,{children:["You will get a ",r,"% reward for completing the transaction."]})})}),En=i.memo(({onClick:e,className:n})=>{const a=In(Cn.agreeRefund);return t.jsx(on,{controller:a,className:n,onClick:e})}),kn=i.memo(({onClick:e,className:n})=>{const a=In(Cn.refuseRefund);return t.jsx(on,{controller:a,className:n,onClick:e})}),Mn=i.memo(({onClick:e,className:n})=>{const a=In(Cn.cancelRefund);return t.jsx(on,{controller:a,className:n,onClick:e})}),{Text:Nn,Paragraph:Rn}=w,_n=({label:e,type:n,cidList:a=[],className:i})=>0===a.length?null:t.jsx("div",{className:i,children:t.jsx(v,{children:t.jsxs(h,{direction:"vertical",size:"small",style:{width:"100%"},children:[t.jsxs(Nn,{strong:!0,style:{fontFamily:"monospace",fontSize:13},children:[e,":"]}),a.map((e,a)=>{return t.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,width:"100%"},children:t.jsx(Rn,{copyable:{text:e,icon:[t.jsx(I,{},"copy"),t.jsx(S,{},"check")],tooltips:["Copy","Copied!"]},ellipsis:{tooltip:e},style:{flex:1,fontFamily:"cid"===n||"password"===n?"monospace":void 0,fontSize:13},children:(i=e,"password"===n&&i?"".repeat(Math.min(i.length,12)):i)})},a);var i})]})})}),jn=()=>{const{chainId:e,address:t}=ee(),{getPrivateKey_TruthBox:n,setPrivateKey_TruthBox:a}=ct(),{session:i,isValidateSession:r,login:s}=yt(),{getPrivateData:o}=function(){const{readContract:e}=et();return{getBasicData:async t=>{try{const n=await e({contractName:ie.TRUTH_BOX,functionName:"getBasicData",args:[t]});return n&&Array.isArray(n)&&n.length>=3?[Number(n[0]),Number(n[1]),Number(n[2])]:[0,0,0]}catch(n){return[0,0,0]}},getStatus:async(t,n=!1)=>{try{const a=await e({contractName:ie.TRUTH_BOX,functionName:"getStatus",args:[t],force:n});return a?Number(a):0}catch(a){return 0}},getDeadline:async(t,n=!1)=>{try{const a=await e({contractName:ie.TRUTH_BOX,functionName:"getDeadline",args:[t],force:n});return a?Number(a):0}catch(a){return 0}},getPrice:async(t,n=!1)=>{try{const a=await e({contractName:ie.TRUTH_BOX,functionName:"getPrice",args:[t],force:n});return a?Number(a):0}catch(a){return 0}},getPrivateData:async(t,n)=>{try{const a=await e({contractName:ie.TRUTH_BOX,functionName:"getPrivateData",args:[t,n]});return a?String(a):""}catch(a){return""}},blacklistSupply:async(t=!1)=>{try{const n=await e({contractName:ie.TRUTH_BOX,functionName:"blacklistSupply",args:[],force:t});return n?Number(n):0}catch(n){return 0}},completeCounts:async(t=!1)=>{try{const n=await e({contractName:ie.TRUTH_BOX,functionName:"completeCounts",args:[],force:t});return n?Number(n):0}catch(n){return 0}},isInBlacklist:async(t,n=!1)=>{try{const a=await e({contractName:ie.TRUTH_BOX,functionName:"isInBlacklist",args:[t],force:n});return!!a&&Boolean(a)}catch(a){return!1}}}}();return{checkPrivateKeyExist:a=>!!n(a,e,t),getPrivateKey:async u=>{const l=n(u,e,t);if(l)return l;let p=null;if(r)p=i.token;else{const e=await s({statement:"I want to view the private data of the box",resources:[u]});e&&(p=e.token)}if(p){const n=await o(u,p);if(n)return a(u,n,e,t),n}return null}}},Bn=()=>{const[t,n]=e.useState(null),{decryptList:a,decrypt:i}=(()=>{const[t,n]=e.useState(null),[a,i]=e.useState(null),[r,s]=e.useState(null),[o,u]=e.useState(!1);return{decrypt:async(e,t,a,i)=>{u(!0),s(null);try{const r=await Pt.decrypt(e,t,a,i);if(r.success&&r.data)return n(r.data),r.data;{const e=r.error||"Decryption failed";return s(e),null}}catch(r){const e=r instanceof Error?r.message:"Unknown decryption error";return s(e),null}finally{u(!1)}},decryptList:async(e,t,n)=>{u(!0),s(null);try{const a=await Pt.decryptList(e,t,n);if(a.success&&a.data)return i(a.data),a.data;{const e=a.error||"Decryption failed";return s(e),null}}catch(a){const e=a instanceof Error?a.message:"Unknown decryption error";return s(e),null}finally{u(!1)}},data:t,dataList:a,error:r,isLoading:o}})();return{decryptionViewFile:async(e,t)=>{try{if(!(t.publicKey&&t.encryptionFileCID&&t.encryptionPasswords&&t.encryptionSlicesMetadataCID))throw new Error("Metadata box is required!");const r=t.encryptionFileCID.map(e=>({iv_bytes:e.fileCID_iv,encrypted_bytes:e.fileCID_encryption})),s=await a(t.publicKey,e,r),o=await i(t.publicKey,e,t.encryptionSlicesMetadataCID.slicesMetadataCID_iv,t.encryptionSlicesMetadataCID.slicesMetadataCID_encryption),u={fileCIDList:s||[],password:await i(t.publicKey,e,t.encryptionPasswords.password_iv,t.encryptionPasswords.password_encryption)||"",slicesMetadataCID:o||""};return n(u),u}catch(r){throw r}},data:t}},Dn={key:"privateKey",title:"Reading private key"},Pn={key:"decrypt",title:"Decrypting file information"},On={key:"done",title:"Done"},Fn=({onClose:n})=>{var a;const{box:i,metadataBox:r}=an();if(!i||!r)return null;const{steps:s,isProcessing:o,errorMsg:u,result:l,attemptCount:p,maxRetry:d,start:c,retry:y}=(()=>{const{getPrivateKey:t}=jn(),{decryptionViewFile:n}=Bn(),[a,i]=e.useState([{...Dn,status:"wait",description:"Reading private key"},{...Pn,status:"wait",description:"Decrypting file information"},{...On,status:"wait",description:"Done"}]),[r,s]=e.useState(!1),[o,u]=e.useState(null),[l,p]=e.useState(null),d=e.useRef(0),c=e.useCallback(()=>{i([{...Dn,status:"wait",description:"Reading private key"},{...Pn,status:"wait",description:"Decrypting file information"},{...On,status:"wait",description:"Done"}]),p(null),u(null)},[]),y=e.useCallback((e,t,n)=>{i(a=>a.map(a=>a.key===e?{...a,status:t,description:n??a.description}:a))},[]),m=e.useCallback(async(e,i)=>{var r;if(!e||!i)return p("Box or metadata not found, cannot decrypt."),void y("privateKey","error","Missing necessary data");if(d.current>=5)p("Maximum attempts reached (5 times), please try again later.");else{d.current+=1,s(!0),p(null),y("privateKey","process","Reading private key");try{const a=e.privateKey?e.privateKey:await t(e.id);if(!a)throw new Error("Cannot read private key, please confirm that the signature authorization has been completed.");y("privateKey","finish","Private key read completed"),y("decrypt","process","Decrypting file information");const r=await n(a,i);u(r),y("decrypt","finish","Decryption successful"),y("done","finish","Done")}catch(o){const e=(null==o?void 0:o.message)||"Unknown error, please try again later.";p(e),"finish"!==(null==(r=a.find(e=>"privateKey"===e.key))?void 0:r.status)?y("privateKey","error",e):y("decrypt","error",e)}finally{s(!1)}}},[n,t,y,a]),f=e.useCallback((e,t)=>{d.current<5&&m(e,t)},[m]);return{steps:a,isProcessing:r,errorMsg:l,result:o,attemptCount:d.current,maxRetry:5,start:m,retry:f,reset:c}})(),m="create"===(null==r?void 0:r.mintMethod),f=e.useRef(!1);e.useEffect(()=>{f.current||i&&r&&(f.current=!0,c(i,r))},[i,r,c]);const b="finish"===(null==(a=s.find(e=>"decrypt"===e.key))?void 0:a.status),g=Math.max(0,d-p);return t.jsxs(C,{title:"View File",centered:!0,open:!0,closable:!1,maskClosable:!1,onOk:()=>{},onCancel:()=>{n()},okButtonProps:{disabled:!0},cancelButtonProps:{disabled:!1},okText:"Download (Soon)",cancelText:"Close",width:520,children:[!m&&t.jsx(A,{type:"warning",showIcon:!0,message:"This Box is in createAndPublish mode, you can view the file directly in the Published area.",className:"mb-4"}),t.jsx(E,{direction:"vertical",items:s.map(e=>({title:e.title,status:e.status,description:e.description})),className:"mb-4"}),u&&t.jsx(A,{type:"error",showIcon:!0,message:"Operation failed",description:u,className:"mb-3"}),t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[t.jsxs(Nt,{children:["Attempts: ",p,"/",d,"Remaining ",g," times"]}),t.jsx(T,{type:"link",size:"small",onClick:()=>y(i,r),disabled:o||0===g,className:"px-0",children:"Continue request"})]}),o&&t.jsx(Nt,{children:"Processing, please wait patiently"}),b&&t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx(_n,{label:"File CID",type:"cid",cidList:(null==l?void 0:l.fileCIDList)||[]}),t.jsx(_n,{label:"Password",type:"password",cidList:[(null==l?void 0:l.password)||""]}),t.jsx(_n,{label:"Slices Metadata CID",type:"cid",cidList:[(null==l?void 0:l.slicesMetadataCID)||""]})]})]})},Ln=i.memo(({onClick:n,className:a})=>{const[i,r]=e.useState(!1),s=In(Cn.viewFile);return t.jsxs(on,{controller:s,className:a,onClick:()=>{null==n||n(),r(!0)},children:[t.jsx(Nt,{children:"You can view the confidential file here."}),i&&t.jsx(Fn,{onClose:()=>r(!1)})]})}),Wn=i.memo(({onClick:e,className:n})=>{const a=In(Cn.publish);return t.jsx(on,{controller:a,className:n,onClick:e})}),Kn=()=>{const{box:n,orderAmountsData:a}=an(),{address:i}=ee();if(!n||!i)return t.jsx("div",{children:"loading..."});const r=null==a?void 0:a.find(e=>e.token===n.acceptedToken),s=e.useMemo(()=>r?Number(r.amount):0,[r]),o=e.useMemo(()=>n.price?Math.max(0,Number(n.price)-s):0,[n.price,s]),u=Pe(n.acceptedToken);return t.jsxs(t.Fragment,{children:[s>0&&t.jsxs("div",{style:{marginBottom:"5px"},children:[t.jsx(Nt,{children:"In the Auction, you paid:"}),t.jsx(St,{price:s,symbol:null==u?void 0:u.symbol,decimals:null==u?void 0:u.decimals})]}),o>0&&t.jsxs("div",{children:[t.jsx(Nt,{children:"You need to pay:"}),t.jsx(St,{price:o,symbol:null==u?void 0:u.symbol,decimals:null==u?void 0:u.decimals})]})]})},Hn={allowance:{title:"Checking allowance...",descriptions:{idle:"Checking allowance...",pending:"Checking allowance...",success:"Allowance is enough",error:"Checking allowance failed"}},approve:{title:"Approve",descriptions:{idle:"Need to approve",pending:"Approving...",success:"Approve success",error:"Approve failed"}},buy:{title:"Buy",descriptions:{idle:"Ready to buy",pending:"Executing buy operation...",success:"Buy operation success",error:"Buy operation failed"}},bid:{title:"Bid",descriptions:{idle:"Ready to bid",pending:"Executing bid operation...",success:"Bid operation success",error:"Bid operation failed"}},payConfiFee:{title:"PayConfiFee",descriptions:{idle:"Ready to pay confidentiality fee",pending:"Executing pay confidentiality fee operation...",success:"Pay confidentiality fee operation success",error:"Pay confidentiality fee operation failed"}}},Un=(e,t)=>{const n=[{stepKey:"allowance",title:Hn.allowance.title,description:Hn.allowance.descriptions.success,status:"wait"}];return t||n.push({stepKey:"approve",title:Hn.approve.title,description:Hn.approve.descriptions.idle,status:"wait"}),"buy"===e?n.push({stepKey:"buy",title:Hn.buy.title,description:Hn.buy.descriptions.idle,status:"wait"}):"bid"===e?n.push({stepKey:"bid",title:Hn.bid.title,description:Hn.bid.descriptions.idle,status:"wait"}):"payConfiFee"===e&&n.push({stepKey:"payConfiFee",title:Hn.payConfiFee.title,description:Hn.payConfiFee.descriptions.idle,status:"wait"}),n},qn=(t,n,a,i)=>{const r=Ye(),{address:s}=O(),{readAllowance:o,allowanceAmount:u,isEnough:l}=zt(),{writeCustormV2:p,status:d,isLoading:c,isSuccessed:y}=ln(t),[m,f]=e.useState({steps:Un(i,!1),currentIndex:0}),b=e.useCallback(e=>{const t=Un(i,e),n=t.length>1?1:0;f({steps:t,currentIndex:n})},[i]),g=e.useCallback((e,t)=>{f(n=>{const a=n.steps.findIndex(t=>t.stepKey===e);if(-1===a)return n;const i=(e=>{switch(e){case"pending":return"process";case"success":return"finish";case"error":return"error";default:return"wait"}})(t),r=Hn[e].descriptions[t],s=n.steps.map((e,t)=>t===a?{...e,status:i,description:r}:e);let o=n.currentIndex;const u=a===n.currentIndex,l=a<s.length-1;return"finish"===i&&u&&l&&(o=a+1),{steps:s,currentIndex:o}})},[]),{steps:x,currentIndex:h}=m,T=x[h]??x[x.length-1],v=e.useCallback(async e=>{if(!(s&&n&&a&&r.FundManager.address))return;const t=G(a,n.decimals);try{const a=await o(n.address,s,r.FundManager.address,t);"init"!==e&&"approve"!==e||b(a.isEnough),g("allowance","success")}catch(i){g("allowance","error")}},[n,a,o,s,b,g]),w=e.useCallback(async(e=!1)=>{if(!n||!a||!r.FundManager.address)return;const t=e?X:G(a,n.decimals);try{g("approve","pending");const e=function(e){return Ze.getContractConfigByAddress(e)}(n.address);await p({contract:e,functionName:"approve",args:[r.FundManager.address,t]}),g("approve","success")}catch(i){g("approve","error")}},[n,a,p,v,g]),I=e.useCallback(async()=>{if(!n||!a||!r)return;let e=r.Exchange;"payConfiFee"===i&&(e=r.TruthBox);try{g(i,"pending"),await p({contract:e,functionName:i,args:[t]}),g(i,"success")}catch(s){g(i,"error")}},[n,a,p,i,t,g]);return{steps:x,currentIndex:h,currentStepItem:T,initializeSteps:b,updateStepStatus:g,checkAllowance:v,handleApproveClick:w,handleBuyBidClick:I,isLoading:c,isEnough:l,isSuccessed:y,status:d,allowanceAmount:u,formattedAllowanceAmount:q(u,(null==n?void 0:n.decimals)??18)}};const zn=({open:n,onClose:a,boxId:i,tokenAddress:r,amount:s,functionName:o})=>{const u=function(t){return e.useMemo(()=>Pe(t),[t])}(r),{steps:l,checkAllowance:p,handleApproveClick:d,handleBuyBidClick:c,isLoading:y,isSuccessed:m,status:f,currentStepItem:b,formattedAllowanceAmount:g}=qn(i,u,s,o);if(!u||!s)return null;const x=function(e){if(/[eE]/.test(e)){const[t,n]=e.split(/[eE]/),a=parseInt(n,10),[i,r=""]=t.split("."),s=r.length;if(i.length,a>0){const e=i+r,t=a-s;if(t>0)return BigInt(e+"0".repeat(t));if(t<0){const n=e.slice(0,e.length+t);return BigInt(n||"0")}return BigInt(e)}return BigInt(i)}const t=e.split(".")[0];return BigInt(t)}(s),v=q(x,u.decimals),w="approve"===b.stepKey&&"finish"!==b.status,I="buy"===b.stepKey||"bid"===b.stepKey||"payConfiFee"===b.stepKey,S=e.useMemo(()=>l.map(({stepKey:e,...t})=>({key:e,...t})),[l]);e.useEffect(()=>{n&&p("init")},[n,r]);const k=()=>{a()};return t.jsx(C,{title:"Wrap operation process",open:n,onCancel:k,closable:"pending"!==f,maskClosable:"pending"!==f,footer:[t.jsx(T,{onClick:k,disabled:"pending"===f,children:m?"Complete":"Cancel"},"close")],width:450,centered:!0,children:t.jsxs(h,{direction:"vertical",size:"large",style:{width:"100%"},children:[t.jsx(A,{type:"info",message:t.jsxs(h,{direction:"vertical",size:"small",children:[t.jsxs(Nt,{type:"info",children:["You are about to ",o," this box."]}),t.jsxs(Nt,{children:["Price: ",v," ",null==u?void 0:u.symbol]})]}),showIcon:!0}),t.jsx(E,{direction:"vertical",items:S,size:"small"}),w&&t.jsxs(h,{direction:"vertical",size:"middle",style:{width:"100%"},children:[t.jsx(A,{type:"warning",message:t.jsx(h,{direction:"vertical",size:"small",children:t.jsxs(Nt,{children:["Allowance is not enough. Current: ",g,", Required: ",s]})}),showIcon:!0}),t.jsxs(T,{type:"primary",onClick:()=>d(!1),loading:y,disabled:!w,block:!0,children:["Approve ",v," ",null==u?void 0:u.symbol]}),t.jsx(T,{type:"primary",onClick:()=>d(!0),loading:y,disabled:!w,block:!0,children:"Approve Max(uint256)"})]}),"approve"===b.stepKey&&"process"===b.status&&t.jsx(A,{type:"info",message:"Approving token...",showIcon:!0}),I&&t.jsx(T,{type:"primary",onClick:c,loading:y,disabled:!I,block:!0,children:o}),l.some(e=>"error"===e.status)&&t.jsx(A,{type:"error",message:"Operation failed",description:"Please check network connection and wallet status, then try again.",showIcon:!0}),m&&t.jsx(A,{type:"success",message:"Wrap operation completed successfully",showIcon:!0})]})})},Vn=i.memo(({onClick:n,className:a})=>{var i;const r=In(Cn.bid),{box:s}=an(),[o,u]=e.useState(!1),l=null==s?void 0:s.acceptedToken,p=e.useMemo(()=>{const e=null==s?void 0:s.price;return e?e.toString():"0"},[null==s?void 0:s.price]);return t.jsxs(on,{controller:r,className:a,onClick:()=>{null==n||n(),u(!0)},children:[t.jsx("div",{className:"w-full mt-2 flex-col",children:t.jsx(Kn,{})}),l&&t.jsx(zn,{open:o,onClose:()=>u(!1),boxId:(null==(i=null==s?void 0:s.id)?void 0:i.toString())||"",tokenAddress:l,amount:p,functionName:"bid"})]})}),$n=i.memo(({onClick:n,className:a})=>{var i;const r=In(Cn.buy),{box:s}=an(),[o,u]=e.useState(!1),l=null==s?void 0:s.acceptedToken,p=e.useMemo(()=>{const e=null==s?void 0:s.price;return e?e.toString():"0"},[null==s?void 0:s.price]);return t.jsx(on,{controller:r,className:a,onClick:()=>{null==n||n(),u(!0)},children:l&&t.jsx(zn,{open:o,onClose:()=>u(!1),boxId:(null==(i=null==s?void 0:s.id)?void 0:i.toString())||"",tokenAddress:l,amount:p,functionName:"buy"})})}),Zn=({options:n,value:a,defaultValue:r,onChange:s,placeholder:o="Please select",className:u,disabled:l=!1,searchable:p=!0,searchPlaceholder:d="Search...",filterFunction:c,onSearch:y,noResultsText:m="No matching results",allowClear:f=!0,maxDisplayOptions:b=10})=>{const[g,x]=e.useState(""),[h,T]=e.useState(""),v=void 0!==a;v||n.find(e=>String(e.value)===h),e.useEffect(()=>{r&&!v&&T(String(r.value))},[r,v]),e.useEffect(()=>{v&&a?T(String(a.value)):v&&!a&&T("")},[a,v]);const w=(e,t)=>{const n=t.toLowerCase().trim();return!n||(e.name.toLowerCase().includes(n)||e.symbol&&e.symbol.toLowerCase().includes(n)||String(e.value).toLowerCase().includes(n))},I=i.useMemo(()=>{if(!p||!g)return n.slice(0,b);const e=c||w;return n.filter(t=>e(t,g)).slice(0,b)},[n,g,p,c,b]),S=e=>t.jsxs("div",{className:"flex items-center gap-3 w-full",children:[e.icon&&t.jsx("img",{src:e.icon,alt:"icon",className:"w-5 h-5 rounded-full flex-shrink-0 object-cover"}),t.jsx("span",{className:"truncate font-mono flex-1",children:e.name}),e.symbol&&t.jsx("span",{className:"text-muted-foreground font-mono text-sm flex-shrink-0",children:e.symbol})]}),C=I.map(e=>({label:S(e),value:String(e.value)}));return t.jsx("div",{className:ne("w-full",u),children:t.jsx(k,{value:h||void 0,onChange:e=>(e=>{const t=n.find(t=>String(t.value)===e);v||T(e),null==s||s(t||null)})(e||""),disabled:l||0===C.length,placeholder:o,allowClear:f,onClear:()=>{v||T(""),null==s||s(null),x("")},showSearch:p,onSearch:e=>{x(e),y&&y(e)},filterOption:!1,options:C,notFoundContent:g?m:"No options",className:"w-full",optionLabelProp:"label"})})},Gn=({onChange:n})=>{const a=Je(),[i,r]=e.useState(null),s=a.filter(e=>e.canAcceptToken).map(e=>({index:e.index,name:e.name,symbol:e.symbol,value:e.address,decimals:e.decimals}));return e.useEffect(()=>{r(s[0])},[]),t.jsx(Zn,{options:s,value:i,onChange:e=>{n(e),r(e)},placeholder:"Please select a token"})},Xn=({onClose:n,listedMode:a,controller:i})=>{const r=en(e=>e.updateModalStatus),{roles:s}=en(e=>e.userState),{boxId:o,box:u}=an(),l=qe[0].address,p=qe[0].decimals,[d,c]=e.useState(""),[y,m]=e.useState(l),[f,b]=e.useState(p);e.useEffect(()=>{r("SellAuction","open")},[]);const g=()=>{r("SellAuction","close"),n()};if(!u)return t.jsx("div",{children:"loading..."});const x=s.includes("Minter");return t.jsx(C,{title:"Sell"===a?"Sell Truth Box":"Auction Truth Box",centered:!0,open:!0,closable:!1,maskClosable:!1,onOk:async()=>{if(i.isSuccessed)return void g();if(!u)return;let e=y,t=BigInt(0);if(s.includes("Minter")){if(!y)return void N.error("Token is required");t=d&&Number(d)>0?G(String(d),f):BigInt(0)}await i.execute({customArgs:{acceptedToken:e,price:t}})},onCancel:g,okButtonProps:{disabled:i.isLoading},cancelButtonProps:{disabled:i.isLoading},okText:i.isLoading?"Processing...":i.isSuccessed?"Success":"Submit",cancelText:"Close",width:450,children:t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("div",{className:"flex flex-col gap-2 text-foreground",children:[t.jsxs(Nt,{children:["boxId:",o]}),t.jsxs("div",{className:"flex flex-row gap-2 items-baseline",children:[t.jsx(Nt,{children:"Current Price:"}),t.jsx(St,{price:u.price,symbol:qe[0].symbol,decimals:qe[0].decimals})]}),t.jsx("hr",{className:"my-2"}),x?t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("div",{className:"flex flex-col gap-2 items-start",children:[t.jsx(Nt,{children:"Accpet Token:"}),t.jsx(Gn,{onChange:e=>{m(null==e?void 0:e.value),b(null==e?void 0:e.decimals)}})]}),t.jsxs("div",{className:"flex flex-col gap-2 items-baseline",children:[t.jsx(Nt,{children:"Price:"}),t.jsx(M,{onChange:e=>(e=>{c(null==e?"":String(e))})(e),value:d?Number(d):void 0,placeholder:"Enter price"})]}),t.jsx(Nt,{children:"If you don't enter the price, the default price will be used."})]}):t.jsx(Nt,{children:"Only Minter can set price!"})]}),t.jsx("hr",{className:"my-2"})]})})},Yn=i.memo(({onClick:n,className:a})=>{const[i,r]=e.useState(!1),s=In(Cn.sell),{roles:o}=en(e=>e.userState),{helperRewardRate:u}=We();return t.jsxs(on,{controller:s,className:a,onClick:()=>{null==n||n(),s.isDisabled||r(!0)},children:[t.jsx("div",{className:"flex flex-col items-start",children:o.includes("Minter")?t.jsx(Nt,{children:"You can sell or auction the Box at any time."}):t.jsxs(Nt,{children:["Sell or auction the Box, you can get the Rewards, the Rewards is ",u,"% of the Box price."]})}),i&&t.jsx(Xn,{onClose:()=>{r(!1)},listedMode:"Sell",controller:s})]})}),Jn=i.memo(({onClick:n,className:a})=>{const[i,r]=e.useState(!1),s=In(Cn.auction),{initialAuctionPeriod:o}=We();return t.jsxs(on,{controller:s,className:a,onClick:()=>{null==n||n(),r(!0)},children:[t.jsxs(Nt,{children:["Start the auction, the initial auction period is ",o/24/3600," days."]}),i&&t.jsx(Xn,{onClose:()=>{r(!1)},listedMode:"Auction",controller:s})]})}),Qn=i.memo(({onClick:e,className:n})=>{const a=In(Cn.requestRefund),{box:i}=an();return t.jsx(on,{controller:a,className:n,onClick:e,children:t.jsx("div",{className:ne("flex flex-col items-start"),children:t.jsxs(Nt,{type:"info",children:["Request Refund Deadline: ",Ft(Number(null==i?void 0:i.requestRefundDeadline))]})})})}),ea=i.memo(({onClick:n,className:a})=>{var i;const r=In(Cn.payConfiFee),{box:s}=an(),{confidentialityFeeExtensionPeriod:o,incrementRate:u}=We(),[l,p]=e.useState(!1),d=null==s?void 0:s.acceptedToken,c=e.useMemo(()=>{const e=null==s?void 0:s.price;return e?e.toString():"0"},[null==s?void 0:s.price]);return t.jsxs(on,{controller:r,className:a,onClick:()=>{null==n||n(),p(!0)},children:[t.jsxs("div",{className:ne("flex flex-col items-start"),children:[t.jsxs(Nt,{children:["Pay the confidentiality fee to extend the confidentiality period: ",o/24/3600," days"]}),t.jsxs(Nt,{children:["The increment rate: ",u,"%"]})]}),d&&t.jsx(zn,{open:l,onClose:()=>p(!1),boxId:(null==(i=null==s?void 0:s.id)?void 0:i.toString())||"",tokenAddress:d,amount:c,functionName:"payConfiFee"})]})}),ta=({onClose:n})=>{const{boxId:a,box:i}=an(),r=en(e=>e.updateModalStatus),{writeCustormV2:s,error:o,isLoading:u,isSuccessed:l}=ln(a),p=Ye(),[d,c]=e.useState(!1),[y,m]=e.useState("Submit"),[f,b]=e.useState("");if(!i)return t.jsx("div",{children:"loading..."});e.useEffect(()=>{r("ExtendDeadline","open")},[]),e.useEffect(()=>{l?(c(!1),m("Success")):u?(c(!0),m("wait...")):o&&(c(!1),m("Submit"))},[o,u,l]);return t.jsxs(C,{title:"Extend Deadline",centered:!0,open:!0,closable:!1,maskClosable:!1,onOk:async()=>{if(f&&Number(f)>0){const e=24*Number(f)*60*60;await s({contract:p.TruthBox,functionName:"extendDeadline",args:[a,e]})}else alert("Empty data!")},onCancel:()=>{r("ExtendDeadline","close"),n()},okButtonProps:{disabled:d},cancelButtonProps:{disabled:d},okText:y,cancelText:"Close",width:450,children:[t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("div",{className:"flex flex-row gap-2 items-baseline",children:[t.jsx(Nt,{children:"Current boxId:"}),t.jsx(Nt,{children:a})]}),t.jsx("div",{className:"flex flex-col gap-2",children:t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsx(Nt,{children:"Days:"}),t.jsx("div",{className:"flex flex-row w-full",children:t.jsx(M,{value:f,suffix:"days",precision:0,min:"1",step:10,placeholder:"Input timestamp",onChange:e=>(e=>{b(e)})(e||"")})})]})})]}),t.jsx("hr",{className:"my-2"})]})},na=i.memo(({onClick:n,className:a})=>{const[i,r]=e.useState(!1),s=In(Cn.extendDeadline);return t.jsx(on,{controller:s,className:a,onClick:()=>{null==n||n(),s.isDisabled||r(!0)},children:i&&t.jsx(ta,{onClose:()=>{r(!1)}})})}),aa=({})=>{const{box:e}=an();return e?t.jsxs("div",{className:"flex flex-col items-start justify-center gap-4",children:[t.jsx(Yn,{}),t.jsx(Jn,{}),t.jsx(na,{}),t.jsx(Wn,{}),t.jsx(Ln,{})]}):t.jsx("div",{children:"loading..."})},ia=({})=>{en(e=>e);const{box:e}=an();return e?t.jsxs("div",{className:"flex flex-col items-start justify-center gap-4",children:[!e.buyerId&&Number(e.deadline)<Math.floor(Date.now()/1e3)&&t.jsx("div",{className:"mb-4",children:t.jsx(A,{type:"warning",message:"Warning",description:"No one bought, the transaction is over, please public this Truth Box"})}),t.jsx($n,{}),t.jsx(Wn,{}),t.jsx(Ln,{})]}):t.jsx("div",{children:"loading..."})},ra=({})=>{const e=en(e=>e),{roles:n}=e.userState,{box:a,biddersIds:i}=an();return a?t.jsxs("div",{className:"flex flex-col items-start justify-center gap-4",children:[n.includes("Minter")||n.includes("Admin")||n.includes("Seller")||n.includes("Buyer")?t.jsx(A,{type:"warning",message:"Warning",description:"You are not authorized to participate in the bidding."}):t.jsx(t.Fragment,{}),0===(null==i?void 0:i.length)&&Number(a.deadline)<Math.floor(Date.now()/1e3)&&t.jsx("div",{className:"mb-4",children:t.jsx(A,{type:"warning",message:"Warning",description:"No one participated in the auction, the auction is over, please public this Truth Box"})}),t.jsx(Vn,{}),t.jsx(Wn,{}),t.jsx(Ln,{})]}):t.jsx("div",{children:"loading..."})},sa=({})=>{const{box:e}=an();return e?t.jsxs("div",{className:"flex flex-col items-start justify-center gap-4",children:[t.jsx(R,{}),t.jsx(Qn,{}),t.jsx(An,{}),t.jsx(Ln,{})]}):t.jsx("div",{children:"loading..."})},oa=({})=>{const{box:e}=an();return e?t.jsxs("div",{className:"flex flex-col items-start justify-center gap-4",children:[t.jsx(En,{}),t.jsx(kn,{}),t.jsx(Mn,{}),t.jsx(Ln,{})]}):t.jsx("div",{children:"loading..."})},ua=({})=>{const e=en(e=>e),{roles:n}=e.userState,{box:a}=an();return a?t.jsxs("div",{className:"flex flex-col items-start justify-center gap-4",children:[n.includes("Buyer")&&t.jsx("div",{className:"mb-4",children:t.jsx(A,{type:"info",message:"Info",description:"Each time the confidentiality period is extended, an additional confidentiality fee must be paid."})}),t.jsx(ea,{}),t.jsx(Wn,{}),t.jsx(Ln,{})]}):t.jsx("div",{children:"loading..."})},la=({})=>{const{box:n,metadataBox:a}=an(),{decryptionViewFile:i}=Bn();e.useRef(i).current=i;const[r,s]=e.useState([]),[o,u]=e.useState(null),l=(null==a?void 0:a.mintMethod)||"create",p="create"===l;if(e.useEffect(()=>a?"createAndPublish"===a.mintMethod?(s(a.fileList||[]),void u(null)):void 0:(s([]),void u("Metadata not found, cannot show download information.")),[a]),!n)return t.jsx("div",{children:"loading..."});const d=r.length>0;return t.jsxs("div",{className:"flex w-full flex-col items-start justify-center gap-4",children:[t.jsxs(Nt,{children:["You can use the link to download the file. If the password is empty,",t.jsx("br",{}),"it means that a password is not required."]}),a&&t.jsxs(Nt,{children:["The current Box uses the ",t.jsx("strong",{className:"text-primary",children:l})," mode to publish,",p?" need to decrypt to get file CID / password.":" metadata directly contains file CID."]}),o&&t.jsx(A,{type:"error",showIcon:!0,message:"Cannot show file information",description:o}),r.length>0?t.jsx(_n,{label:"File CID",type:"cid",cidList:r}):t.jsx(Ln,{}),!o&&a&&!d&&t.jsx(Nt,{children:"Metadata does not contain files to display."})]})},pa={statusNode:({data:e})=>t.jsxs("div",{className:"relative",children:[t.jsx(d,{type:"target",position:J.Left,style:{background:"#555"}}),t.jsx(Et,{status:e.status,size:e.size,responsive:e.responsive,disabled:!e.isActive}),t.jsx(d,{type:"source",position:J.Right,style:{background:"#555"}})]})},da=({status:n="Storing",listedMode:a="Selling",className:i,size:r="md",responsive:d=!0,showControls:c=!1,showBackground:y=!0,draggable:m=!1,fixedSize:f=!1})=>{const b=e.useCallback(e=>{if(!n)return!1;return({Storing:["Storing"],Selling:["Storing","Selling"],Auctioning:["Storing","Auctioning"],Paid:["Storing",a,"Paid"],Refunding:["Storing",a,"Paid","Refunding"],InSecrecy:["Storing",a,"Paid","InSecrecy"],Published:["Storing",a,"Paid","InSecrecy","Published"],Blacklisted:["Storing","Blacklisted"]}[n]||[]).includes(e)},[n,a]),g=e.useCallback(()=>{const e={sm:{storing:{x:0,y:40},selling:{x:120,y:20},auctioning:{x:120,y:60},paid:{x:240,y:40},inSecrecy:{x:360,y:20},refunding:{x:360,y:60},published:{x:480,y:40}},md:{storing:{x:0,y:60},selling:{x:150,y:30},auctioning:{x:150,y:90},paid:{x:300,y:60},inSecrecy:{x:450,y:30},refunding:{x:450,y:90},published:{x:600,y:60}},lg:{storing:{x:0,y:80},selling:{x:200,y:40},auctioning:{x:200,y:120},paid:{x:400,y:80},inSecrecy:{x:600,y:40},refunding:{x:600,y:120},published:{x:800,y:80}}};return e[r]||e.md},[r]),x=e.useCallback(()=>{const e=g();return[{id:"storing",position:e.storing,data:{status:"Storing",isActive:b("Storing"),isCurrent:"Storing"===n,size:r,responsive:d},type:"statusNode"},{id:"selling",position:e.selling,data:{status:"Selling",isActive:b("Selling"),isCurrent:"Selling"===n,size:r,responsive:d},type:"statusNode"},{id:"auctioning",position:e.auctioning,data:{status:"Auctioning",isActive:b("Auctioning"),isCurrent:"Auctioning"===n,size:r,responsive:d},type:"statusNode"},{id:"paid",position:e.paid,data:{status:"Paid",isActive:b("Paid"),isCurrent:"Paid"===n,size:r,responsive:d},type:"statusNode"},{id:"inSecrecy",position:e.inSecrecy,data:{status:"InSecrecy",isActive:b("InSecrecy"),isCurrent:"InSecrecy"===n,size:r,responsive:d},type:"statusNode"},{id:"refunding",position:e.refunding,data:{status:"Refunding",isActive:b("Refunding"),isCurrent:"Refunding"===n,size:r,responsive:d},type:"statusNode"},{id:"published",position:e.published,data:{status:"Published",isActive:b("Published"),isCurrent:"Published"===n,size:r,responsive:d},type:"statusNode"}]},[g,b,n,r,d]),h=e.useMemo(()=>[{id:"storing-selling",source:"storing",target:"selling"},{id:"storing-auctioning",source:"storing",target:"auctioning"},{id:"selling-paid",source:"selling",target:"paid"},{id:"auctioning-paid",source:"auctioning",target:"paid"},{id:"paid-inSecrecy",source:"paid",target:"inSecrecy"},{id:"paid-refunding",source:"paid",target:"refunding"},{id:"inSecrecy-published",source:"inSecrecy",target:"published"},{id:"refunding-published",source:"refunding",target:"published"}],[]),[T,v,w]=s(x()),[I,S,C]=o(h);e.useEffect(()=>{v(x())},[x,v]);const A=e.useCallback(e=>S(t=>Y(e,t)),[]),E=e.useCallback(()=>{const e={sm:"80px",md:"120px",lg:"160px"};return e[r]||e.md},[r]),k=e.useCallback(()=>{const e={sm:"720px",md:"920px",lg:"1120px"};return e[r]||e.md},[r]);return t.jsx("div",{className:ne("bg-background ",i),style:{height:f?E():"100%",width:f?k():"100%",position:"relative",overflow:"hidden"},children:t.jsxs(u,{nodes:T,edges:I,onNodesChange:w,onEdgesChange:C,onConnect:A,nodeTypes:pa,fitView:!0,fitViewOptions:{padding:.3},nodesDraggable:m,nodesConnectable:!1,elementsSelectable:!1,panOnDrag:!1,zoomOnScroll:!1,zoomOnPinch:!1,zoomOnDoubleClick:!1,preventScrolling:!1,proOptions:{hideAttribution:!0},children:[y&&t.jsx(l,{}),c&&t.jsx(p,{})]},`flow-${I.length}-${T.length}`)})},ca=({status:n,listedMode:a,className:i,size:r="md",responsive:s=!0,showBackground:o=!0,showIndicator:u=!0,enableHorizontalScroll:l=!1})=>(e.useEffect(()=>{l&&(e=>{const t=document.querySelector(`#status-step-flow-${e}`);t&&t.scrollIntoView({behavior:"smooth",inline:"center"})})(n)},[l,n]),t.jsxs("div",{className:ne("bg-background relative",i),style:{width:"100%",position:"relative"},children:[l&&u&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"absolute left-0 top-0 w-8 h-full bg-gradient-to-r from-background via-background/80 to-transparent z-10 flex items-center justify-start pl-1 pointer-events-none",children:t.jsx(c,{className:"w-4 h-4 text-muted-foreground/60 animate-pulse"})}),t.jsx("div",{className:"absolute right-0 top-0 w-8 h-full bg-gradient-to-l from-background via-background/80 to-transparent z-10 flex items-center justify-end pr-1 pointer-events-none",children:t.jsx(y,{className:"w-4 h-4 text-muted-foreground/60 animate-pulse"})})]}),t.jsx("div",{className:ne(l&&"status-step-flow-container"),style:l?{overflowX:"auto",overflowY:"hidden",width:"100%"}:{width:"100%",overflow:"hidden"},children:t.jsx("div",{style:l?{display:"flex",justifyContent:"center",alignItems:"center",minWidth:"fit-content",width:"max-content"}:{width:"100%",height:"100%"},children:t.jsx(da,{status:n,listedMode:"Auctioning"!==a?"Selling":a,size:r,responsive:s,showBackground:o,fixedSize:l})})})]})),ya=({value:n,unit:a,size:i,responsive:r=!0})=>{const s=e.useMemo(()=>{const e={sm:{number:r?"text-xl sm:text-2xl lg:text-3xl":"text-2xl",unit:r?"text-sm sm:text-base":"text-base",padding:r?"px-2 py-1 sm:px-3 sm:py-2":"px-3 py-2",spacing:r?"ml-1 mr-1 sm:ml-1 sm:mr-2":"ml-1 mr-2"},md:{number:r?"text-2xl sm:text-3xl lg:text-4xl":"text-3xl",unit:r?"text-base sm:text-lg":"text-lg",padding:r?"px-3 py-2 sm:px-4 sm:py-3 lg:px-5 lg:py-4":"px-4 py-3",spacing:r?"ml-1 mr-2 sm:ml-2 sm:mr-3 lg:mr-3":"ml-2 mr-3"},lg:{number:r?"text-3xl sm:text-4xl lg:text-5xl":"text-4xl",unit:r?"text-lg sm:text-xl":"text-xl",padding:r?"px-4 py-3 sm:px-5 sm:py-4 lg:px-6 lg:py-5":"px-5 py-4",spacing:r?"ml-2 mr-3 sm:ml-2 sm:mr-4 lg:mr-4":"ml-2 mr-4"}};return e[i]||e.md},[i,r]);return t.jsxs("div",{className:"flex items-baseline",children:[t.jsx("span",{className:ne("font-medium text-foreground bg-secondary rounded-lg transition-all duration-200",s.number,s.padding),children:n.toString().padStart(2,"0")}),t.jsx("span",{className:ne("text-muted-foreground font-normal",s.unit,s.spacing),children:a})]})},ma=({targetTime:n,size:a="md",className:i,showStatus:r=!0,customStatusText:s,onCountdownEnd:o,direction:u="vertical",responsive:l=!0})=>{const p=e.useCallback(()=>{const e=Math.floor(Date.now()/1e3),t=n-e;let a={days:0,hours:0,minutes:0,seconds:0};return t>0?(a={days:Math.floor(t/86400),hours:Math.floor(t/3600%24),minutes:Math.floor(t/60%60),seconds:Math.floor(t%60)},{timeLeft:a,status:"counting"}):{timeLeft:a,status:"ended"}},[n]),[d,c]=e.useState(()=>{const{timeLeft:e}=p();return e}),[y,m]=e.useState(()=>{const{status:e}=p();return e}),f=e.useMemo(()=>({counting:(null==s?void 0:s.counting)||"Countdown",ended:(null==s?void 0:s.ended)||"Countdown has ended"}),[s]),b=e.useMemo(()=>{const e={sm:{spacing:l?"space-y-2 sm:space-y-3":"space-y-3",statusText:l?"text-lg sm:text-xl":"text-xl",containerPadding:l?"p-3 sm:p-4":"p-4"},md:{spacing:l?"space-y-3 sm:space-y-4 lg:space-y-5":"space-y-4",statusText:l?"text-xl sm:text-2xl lg:text-3xl":"text-2xl",containerPadding:l?"p-4 sm:p-6 lg:p-8":"p-6"},lg:{spacing:l?"space-y-4 sm:space-y-6 lg:space-y-8":"space-y-6",statusText:l?"text-2xl sm:text-3xl lg:text-4xl":"text-3xl",containerPadding:l?"p-6 sm:p-8 lg:p-10":"p-8"}};return e[a]||e.md},[a,l]);e.useEffect(()=>{const e=setInterval(()=>{const{timeLeft:e,status:t}=p();c(e),y!==t&&(m(t),"ended"===t&&o&&o())},1e3);return()=>clearInterval(e)},[n,p,y,o]);const g=e.useMemo(()=>[{value:d.days,unit:"D",label:"Days"},{value:d.hours,unit:"H",label:"Hours"},{value:d.minutes,unit:"M",label:"Minutes"},{value:d.seconds,unit:"S",label:"Seconds"}],[d]),x=e.useMemo(()=>{const e="flex justify-center items-center";return"horizontal"===u?`${e} flex-row space-x-4 sm:space-x-6`:`${e} flex-col ${b.spacing}`},[u,b.spacing]),h=e.useMemo(()=>"flex flex-row justify-center items-center space-x-1 sm:space-x-2",[u]);return t.jsxs("div",{className:ne("w-full bg-background rounded-lg border border-border/50 md:rounded-2xl",x,b.containerPadding,i),children:[r&&t.jsx("p",{className:ne("text-center font-medium","counting"===y?"text-foreground":"text-muted-foreground",b.statusText),children:f[y]}),t.jsx("div",{className:h,children:g.map((e,n)=>t.jsx(ya,{value:e.value,unit:e.unit,size:a,responsive:l},e.unit))})]})},fa=()=>{const{roles:n}=en(e=>e.userState),{login:a,isLoading:i}=yt();return(()=>{const{box:t,biddersIds:n}=an(),{address:a,isConnected:i,chainId:r}=ee()||{},{isValidateSession:s}=yt(),{updateUserState:o}=en(),u=st(e=>{var t,n;const i=r||Ke;if(!i||!a)return"";const s=e.accounts[i];return s?(null==(t=s[a])?void 0:t.userId)??(null==(n=s[a.toLowerCase()])?void 0:n.userId)??"":""});e.useEffect(()=>{let e=[];if(o({roles:e}),!a||!i||!t)return;if(!s)return;const r=String(u).trim(),l=t.sellerId?String(t.sellerId).trim():"",p=t.buyerId?String(t.buyerId).trim():"",d=t.minterId?String(t.minterId).trim():"",c=t.completerId?String(t.completerId).trim():"";n&&n.length>0&&r&&""!==r&&n.some(e=>e===r)&&p!==r&&e.push("Bidder"),o({roles:((null==a?void 0:a.toLowerCase())===nt.toLowerCase()&&e.push("Admin"),r&&""!==r&&(r===d&&e.push("Minter"),r===l&&e.push("Seller"),r===p&&e.push("Buyer"),r===c&&e.push("Completer")),0===e.length&&e.push("Other"),e)})},[a,i,t,u,s])})(),t.jsx("div",{className:"flex flex-col items-start justify-center",children:n.length>0?t.jsx(t.Fragment,{children:t.jsx(A,{showIcon:!0,message:`You are: ${n.join(", ")}`,description:"You can do the following actions:",type:"info"})}):t.jsx(t.Fragment,{children:t.jsx(A,{type:"warning",showIcon:!0,message:"You are: Guest, please login!",description:t.jsx(h,{direction:"vertical",size:"small",style:{width:"100%"},children:t.jsx(T,{type:"primary",block:!0,loading:i,onClick:()=>a(),children:"Login"})})})})})},ba={WTRC:4.8,"WROSE.S":.005,"WTRC.S":4.8},ga=({price:n,token:a,status:i})=>{const{getTokenPrice:r}={getTokenPrice:async(e,t)=>{const n=Ue.find(t=>t.address===e);if(!n)throw new Error(`Token ${e} not found`);const a=Number(q(BigInt(t),n.decimals));return ba[n.symbol]*a}},[s,o]=e.useState(0),u=Pe(a);e.useEffect(()=>{u&&r(u.address,Number(n)).then(e=>{o(e)})},[u,n]);const l="Published"!==i&&"Blacklisted"!==i;return t.jsx(t.Fragment,{children:l&&t.jsxs("div",{className:"flex items-baseline flex-row gap-2",children:[t.jsx(Nt,{children:"Price:"}),t.jsx(St,{size:"xl",price:n,symbol:null==u?void 0:u.symbol,decimals:null==u?void 0:u.decimals}),s>0&&t.jsxs("span",{className:"flex items-baseline flex-row gap-2",children:[t.jsx(Nt,{children:""}),t.jsx(St,{size:"lg",price:s,symbol:"USD"})]})]})})},xa=[{name:"Twitter",icon:t.jsx(m,{className:"w-5 h-5 md:w-6 md:h-6"}),getUrl:(e,t)=>`https://twitter.com/intent/tweet?url=${encodeURIComponent(t)}&text=${encodeURIComponent(e)}`,color:"hover:bg-primary/10 text-primary"},{name:"Facebook",icon:t.jsx(f,{className:"w-5 h-5 md:w-6 md:h-6"}),getUrl:(e,t)=>`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(t)}`,color:"hover:bg-primary/10 text-primary"},{name:"Telegram",icon:t.jsx(b,{className:"w-5 h-5 md:w-6 md:h-6"}),getUrl:(e,t)=>`https://t.me/share/url?url=${encodeURIComponent(t)}&text=${encodeURIComponent(e)}`,color:"hover:bg-primary/10 text-primary"}],ha=({title:e="",description:n="",url:a="",className:i=""})=>{const r=e||n||"",s=a||("undefined"!=typeof window?window.location.href:"");return t.jsx("div",{className:`flex w-full flex-row gap-3 md:gap-4 justify-center items-center ${i}`,children:xa.map(e=>t.jsx("a",{href:e.getUrl(r,s),target:"_blank",rel:"noopener noreferrer","aria-label":`Share to ${e.name}`,className:`rounded-full p-1 md:p-2 shadow-sm transition-colors duration-150 ${e.color} hover:text-primary hover:scale-105`,children:t.jsx("div",{className:"w-4 h-4 md:w-5 md:h-5 flex items-center justify-center text-muted-foreground hover:text-primary ",children:e.icon})},e.name))})},Ta=({tokenId:n})=>{const{box:a,metadataBox:i,isLoading:r}=an(),[s,o]=e.useState(""),[u,l]=e.useState("Storing"),[p,d]=e.useState(""),[c,y]=e.useState(0),[m,f]=e.useState("");e.useEffect(()=>{a&&(l(a.status),o(a.price??""),y(Number(a.deadline)),f(a.acceptedToken??""),d(a.listedMode??"Selling"))},[a]);return r?t.jsx("div",{className:"w-full flex items-center justify-center py-12",children:t.jsx("div",{className:"text-muted-foreground text-lg",children:"Loading..."})}):t.jsxs("div",{className:"w-full space-y-4 md:space-y-6",children:[t.jsx(Et,{status:u}),t.jsx(ca,{status:u,listedMode:p,size:"sm",enableHorizontalScroll:!0}),"Published"!==u&&t.jsxs(t.Fragment,{children:[t.jsx(ma,{targetTime:c,size:"sm"}),t.jsx("hr",{className:"border-border/50"})]}),(null==a?void 0:a.isInBlacklist)&&t.jsx(A,{message:"Warning",description:"The NFT is in blacklist, can't do anything!",type:"warning"}),t.jsx(ga,{status:u,price:s,token:m}),t.jsx(fa,{}),(()=>{switch(u){case"Storing":return t.jsx(aa,{});case"Selling":return t.jsx(ia,{});case"Auctioning":return t.jsx(ra,{});case"Paid":return t.jsx(sa,{});case"Refunding":return t.jsx(oa,{});case"InSecrecy":return t.jsx(ua,{});case"Published":return t.jsx(la,{});default:return null}})(),t.jsx("hr",{className:"border-border/50"}),!1,t.jsx(ha,{title:(null==i?void 0:i.title)??"",description:(null==i?void 0:i.description)??"",image:(null==i?void 0:i.nftImage)??"",url:"undefined"!=typeof window?window.location.href:""})]})};export{nt as A,wt as B,Ot as C,Tt as D,$e as E,nn as F,rn as G,Ta as H,At as I,ze as O,St as P,Et as S,Rt as T,te as W,Nt as a,ee as b,ne as c,Xe as d,ie as e,Qe as f,Pe as g,He as h,Mt as i,st as j,mt as k,yt as l,Ke as m,Ye as n,It as o,Ct as p,Gt as q,zt as r,kt as s,Ft as t,Je as u,Ut as v,qt as w,Kt as x,Lt as y,ht as z};
