import{O as r,r as e,M as o}from"./vendor-BDtTUao2.js";import{s as t}from"./status-D2J4ZcA5.js";import{C as n}from"./index-DzM9oNjl.js";async function a(e){const{network:o,layer:a}=n;try{const{data:n,error:u}=await t.from("box_rewards").select("*").eq("network",o).eq("layer",a).eq("box_id",e);if(u)return{boxRewardsData:null,error:u};const s=n?n.map(e=>function(e){var o;const t=r(e,{deep:!0});return{id:t.id||"",boxId:t.boxId||e.box_id.toString(),rewardType:t.rewardType||t.reward_type||"",token:t.token||"",rewardAmount:(null==(o=t.amount)?void 0:o.toString())||"0"}}(e)):[];return{boxRewardsData:s.length>0?s:null,error:null}}catch(u){return{boxRewardsData:null,error:s(u)}}}async function u(e,o){try{const{network:a,layer:u}=n;let s=null;if(o){const{data:n,error:d}=await t.from("box_user_order_amounts").select("*").eq("network",a).eq("layer",u).eq("box_id",e).eq("user_id",o);if(d)return{orderAmountsData:null,error:d};n&&Array.isArray(n)&&(s=n.map(e=>function(e){var o,t,n;const a=r(e,{deep:!0});return{id:a.id||"",userId:a.userId||(null==(o=a.user_id)?void 0:o.toString())||"",boxId:a.boxId||(null==(t=a.box_id)?void 0:t.toString())||"",token:a.token||"",amount:(null==(n=a.amount)?void 0:n.toString())||"0"}}(e)))}return{orderAmountsData:s&&s.length>0?s:null,error:null}}catch(a){return{orderAmountsData:null,error:s(a)}}}function s(r){return r?"object"==typeof r&&"message"in r?r:new Error("Unknown Supabase error"):null}const d=(r,t,a)=>{const{network:s,layer:d}=n,i=!!r&&!!t&&""!==t.trim()&&a.includes("Bidder"),l=e.useMemo(()=>JSON.stringify([...a].sort()),[a]),{data:m,isLoading:c,error:y,isFetching:w}=o({queryKey:["box-order-amounts",s,d,r,t,l],queryFn:async()=>{const e=await u(r,t);if(e.error)throw e.error;return e},staleTime:3e5,enabled:i});return{orderAmountsData:e.useMemo(()=>{if(null==m?void 0:m.orderAmountsData)return m.orderAmountsData},[null==m?void 0:m.orderAmountsData]),isLoading:c||w,error:y||null}};export{a as q,d as u};
